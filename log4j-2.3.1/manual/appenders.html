<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<!--
   Licensed to the Apache Software Foundation (ASF) under one or more
   contributor license agreements.  See the NOTICE file distributed with
   this work for additional information regarding copyright ownership.
   The ASF licenses this file to You under the Apache License, Version 2.0
   (the "License"); you may not use this file except in compliance with
   the License.  You may obtain a copy of the License at

       http://www.apache.org/licenses/LICENSE-2.0

   Unless required by applicable law or agreed to in writing, software
   distributed under the License is distributed on an "AS IS" BASIS,
   WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   See the License for the specific language governing permissions and
   limitations under the License.
-->
<!-- Generated by Apache Maven Doxia at 2021-12-20 -->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
	<head>
		<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
		<title>Log4j &#x2013; Log4j 2 Appenders - Apache Log4j 2</title>
		<link rel="stylesheet" href="../css/bootstrap.min.css" type="text/css" />
		<link rel="stylesheet" href="../css/site.css" type="text/css" />
		<script type="text/javascript" src="../js/jquery.min.js"></script>
		<script type="text/javascript" src="../js/bootstrap.min.js"></script>
		<script type="text/javascript" src="../js/prettify.min.js"></script>
		<script type="text/javascript" src="../js/site.js"></script>
			<meta name="author" content="Ralph Goers" />
			<meta name="author" content="Gary Gregory" />
			<meta name="author" content="Nick Williams" />
		<meta name="Date-Revision-yyyymmdd" content="20211220" />
		<meta http-equiv="Content-Language" content="en" />
		
				</head>
	<body class="composite">
		<img class="logo-left" src="../images/ls-logo.jpg" alt="Apache logging services logo" />
		<img class="logo-right" src="../images/logo.jpg" alt="Apache log4j logo" />
		<div class="clear"></div>

		<div class="navbar">
			<div class="navbar-inner">
				<div class="container-fluid">
					<a class="brand" href="http://logging.apache.org/log4j/2.x/">Apache Log4j 2 &trade;</a>
						<ul class="nav">
						<li>
					
				
				<a href="http://wiki.apache.org/logging" class="external" target="_blank" title="Logging Wiki">Logging Wiki</a>
			</li>
					<li>
					
				
				<a href="http://www.apache.org/" class="external" target="_blank" title="Apache">Apache</a>
			</li>
					<li>
									<a href="../../../" title="Logging Services">Logging Services</a>
			</li>
					<li>
					
				
				<a href="https://analysis.apache.org/dashboard/index/org.apache.logging.log4j:log4j" class="external" target="_blank" title="Sonar">Sonar</a>
			</li>
		</ul>
				</div>
			</div>
		</div>

		<div class="container-fluid">
			<table class="layout-table">
				<tr>
					<td class="sidebar">
						<div class="well sidebar-nav">
										<ul class="nav nav-list">
		 											 <li class="nav-header"><i class="icon-home"></i>Apache Log4jâ„¢ 2</li>
																						<li class="none">
									<a href="../index.html" title="About">About</a>
					</li>
 																<li class="none">
									<a href="../download.html" title="Download">Download</a>
					</li>
 																<li class="none">
									<a href="../maven-artifacts.html" title="Maven and Ivy">Maven and Ivy</a>
					</li>
 																<li class="none">
									<a href="../build.html" title="Build">Build</a>
					</li>
 																<li class="none">
									<a href="../guidelines.html" title="Guidelines">Guidelines</a>
					</li>
 																<li class="none">
									<a href="../javastyle.html" title="Style Guide">Style Guide</a>
					</li>
 																<li class="none">
									<a href="../changelog.html" title="Changelog">Changelog</a>
					</li>
 																																																																				<li class="collapsed">
									<a href="../javadoc.html" title="Javadoc">Javadoc</a>
										</li>
 																<li class="none">
									<a href="../runtime-dependencies.html" title="Runtime Dependencies">Runtime Dependencies</a>
					</li>
 																<li class="none">
									<a href="../faq.html" title="FAQ">FAQ</a>
					</li>
 																<li class="none">
									<a href="../articles.html" title="Articles">Articles</a>
					</li>
 								</ul>
			<ul class="nav nav-list">
		 											 <li class="nav-header"><i class="icon-book"></i>Manual</li>
																						<li class="none">
									<a href="../manual/index.html" title="Introduction">Introduction</a>
					</li>
 																<li class="none">
									<a href="../manual/architecture.html" title="Architecture">Architecture</a>
					</li>
 																<li class="none">
									<a href="../manual/migration.html" title="Log4j 1.x Migration">Log4j 1.x Migration</a>
					</li>
 																																																																													<li class="collapsed">
									<a href="../manual/api.html" title="API">API</a>
										</li>
 																																																																																																																																																																							<li class="collapsed">
									<a href="../manual/configuration.html" title="Configuration">Configuration</a>
										</li>
 																																																																																						<li class="collapsed">
									<a href="../manual/webapp.html" title="Web Applications and JSPs">Web Applications and JSPs</a>
										</li>
 																																																																													<li class="collapsed">
									<a href="../manual/plugins.html" title="Plugins">Plugins</a>
										</li>
 																																																																																																																																			<li class="collapsed">
									<a href="../manual/lookups.html" title="Lookups">Lookups</a>
										</li>
 																																																																																																																																																																																																																							<li class="expanded active">
									<a href="../manual/appenders.html" title="Appenders">Appenders</a>
										<ul>
																			<li class="none">
									<a href="../manual/appenders.html#AsyncAppender" title="Async">Async</a>
					</li>
 																				<li class="none">
									<a href="../manual/appenders.html#ConsoleAppender" title="Console">Console</a>
					</li>
 																				<li class="none">
									<a href="../manual/appenders.html#FailoverAppender" title="Failover">Failover</a>
					</li>
 																				<li class="none">
									<a href="../manual/appenders.html#FileAppender" title="File">File</a>
					</li>
 																				<li class="none">
									<a href="../manual/appenders.html#FlumeAppender" title="Flume">Flume</a>
					</li>
 																				<li class="none">
									<a href="../manual/appenders.html#JDBCAppender" title="JDBC">JDBC</a>
					</li>
 																				<li class="none">
									<a href="../manual/appenders.html#JMSQueueAppender" title="JMS Queue">JMS Queue</a>
					</li>
 																				<li class="none">
									<a href="../manual/appenders.html#JMSTopicAppender" title="JMS Topic">JMS Topic</a>
					</li>
 																				<li class="none">
									<a href="../manual/appenders.html#JPAAppender" title="JPA">JPA</a>
					</li>
 																				<li class="none">
									<a href="../manual/appenders.html#MemoryMappedFileAppender" title="Memory Mapped File">Memory Mapped File</a>
					</li>
 																				<li class="none">
									<a href="../manual/appenders.html#NoSQLAppender" title="NoSQL">NoSQL</a>
					</li>
 																				<li class="none">
									<a href="../manual/appenders.html#OutputStreamAppender" title="Output Stream">Output Stream</a>
					</li>
 																				<li class="none">
									<a href="../manual/appenders.html#RandomAccessFileAppender" title="Random Access File">Random Access File</a>
					</li>
 																				<li class="none">
									<a href="../manual/appenders.html#RewriteAppender" title="Rewrite">Rewrite</a>
					</li>
 																				<li class="none">
									<a href="../manual/appenders.html#RollingFileAppender" title="Rolling File">Rolling File</a>
					</li>
 																				<li class="none">
									<a href="../manual/appenders.html#RollingRandomAccessFileAppender" title="Rolling Random Access File">Rolling Random Access File</a>
					</li>
 																				<li class="none">
									<a href="../manual/appenders.html#RoutingAppender" title="Routing">Routing</a>
					</li>
 																				<li class="none">
									<a href="../manual/appenders.html#SMTPAppender" title="SMTP">SMTP</a>
					</li>
 																				<li class="none">
									<a href="../manual/appenders.html#SocketAppender" title="Socket">Socket</a>
					</li>
 																				<li class="none">
									<a href="../manual/appenders.html#SyslogAppender" title="Syslog">Syslog</a>
					</li>
 										</ul>
							</li>
 																																																																																																																	<li class="collapsed">
									<a href="../manual/layouts.html" title="Layouts">Layouts</a>
										</li>
 																																																																																																																										<li class="collapsed">
									<a href="../manual/filters.html" title="Filters">Filters</a>
										</li>
 																																																																																						<li class="collapsed">
									<a href="../manual/async.html" title="Async Loggers">Async Loggers</a>
										</li>
 																<li class="none">
									<a href="../manual/jmx.html" title="JMX">JMX</a>
					</li>
 																<li class="none">
									<a href="../manual/logsep.html" title="Logging Separation">Logging Separation</a>
					</li>
 																																																																																																																										<li class="collapsed">
									<a href="../manual/extending.html" title="Extending Log4j">Extending Log4j</a>
										</li>
 																																																		<li class="collapsed">
									<a href="../manual/customconfig.html" title="Extending Log4j Configuration">Extending Log4j Configuration</a>
										</li>
 																																																																																						<li class="collapsed">
									<a href="../manual/customloglevels.html" title="Custom Log Levels">Custom Log Levels</a>
										</li>
 								</ul>
			<ul class="nav nav-list">
		 											 <li class="nav-header"><i class="icon-cog"></i>Components</li>
																						<li class="none">
									<a href="../log4j-api/index.html" title="API">API</a>
					</li>
 																<li class="none">
									<a href="../log4j-core/index.html" title="Implementation">Implementation</a>
					</li>
 																<li class="none">
									<a href="../log4j-jcl/index.html" title="Commons Logging Bridge">Commons Logging Bridge</a>
					</li>
 																<li class="none">
									<a href="../log4j-1.2-api/index.html" title="Log4j 1.2 API">Log4j 1.2 API</a>
					</li>
 																<li class="none">
									<a href="../log4j-slf4j-impl/index.html" title="SLF4J Binding">SLF4J Binding</a>
					</li>
 																<li class="none">
									<a href="../log4j-jul/index.html" title="JUL Adapter">JUL Adapter</a>
					</li>
 																<li class="none">
									<a href="../log4j-to-slf4j/index.html" title="Log4j 2 to SLF4J Adapter">Log4j 2 to SLF4J Adapter</a>
					</li>
 																<li class="none">
									<a href="../log4j-flume-ng/index.html" title="Apache Flume Appender">Apache Flume Appender</a>
					</li>
 																<li class="none">
									<a href="../log4j-taglib/index.html" title="Log4j Tag Library">Log4j Tag Library</a>
					</li>
 																<li class="none">
									<a href="../log4j-jmx-gui/index.html" title="Log4j JMX GUI">Log4j JMX GUI</a>
					</li>
 																<li class="none">
									<a href="../log4j-web/index.html" title="Log4j Web Application Support">Log4j Web Application Support</a>
					</li>
 																<li class="none">
									<a href="../log4j-nosql/index.html" title="Log4j NoSQL support">Log4j NoSQL support</a>
					</li>
 																<li class="none">
									<a href="../log4j-iostreams/index.html" title="Log4j IO Streams">Log4j IO Streams</a>
					</li>
 								</ul>
			<ul class="nav nav-list">
		 											 <li class="nav-header"><i class="icon-info-sign"></i>Project Information</li>
																						<li class="none">
									<a href="../dependencies.html" title="Dependencies">Dependencies</a>
					</li>
 																<li class="none">
									<a href="../dependency-convergence.html" title="Dependency Convergence">Dependency Convergence</a>
					</li>
 																<li class="none">
									<a href="../dependency-management.html" title="Dependency Management">Dependency Management</a>
					</li>
 																<li class="none">
									<a href="../team-list.html" title="Project Team">Project Team</a>
					</li>
 																<li class="none">
									<a href="../mail-lists.html" title="Mailing Lists">Mailing Lists</a>
					</li>
 																<li class="none">
									<a href="../issue-tracking.html" title="Issue Tracking">Issue Tracking</a>
					</li>
 																<li class="none">
									<a href="../license.html" title="Project License">Project License</a>
					</li>
 																<li class="none">
									<a href="../source-repository.html" title="Source Repository">Source Repository</a>
					</li>
 																<li class="none">
									<a href="../project-summary.html" title="Project Summary">Project Summary</a>
					</li>
 								</ul>
			<ul class="nav nav-list">
		 											 <li class="nav-header"><i class="icon-cog"></i>Project Reports</li>
																						<li class="none">
									<a href="../changes-report.html" title="Changes Report">Changes Report</a>
					</li>
 																<li class="none">
									<a href="../jira-report.html" title="JIRA Report">JIRA Report</a>
					</li>
 																<li class="none">
									<a href="../surefire-report.html" title="Surefire Report">Surefire Report</a>
					</li>
 																<li class="none">
									<a href="../rat-report.html" title="RAT Report">RAT Report</a>
					</li>
 								</ul>
							</div>
						<div id="poweredBy">
															<a href="http://maven.apache.org/" title="Built by Maven" class="poweredBy">
				<img class="poweredBy" alt="Built by Maven" src="../images/maven-feather.png" />
			</a>
									</div>
					</td>
					<td class="content">
						<!-- Licensed to the Apache Software Foundation (ASF) under one or more
    contributor license agreements.  See the NOTICE file distributed with
    this work for additional information regarding copyright ownership.
    The ASF licenses this file to You under the Apache License, Version 2.0
    (the "License"); you may not use this file except in compliance with
    the License.  You may obtain a copy of the License at

         http://www.apache.org/licenses/LICENSE-2.0

    Unless required by applicable law or agreed to in writing, software
    distributed under the License is distributed on an "AS IS" BASIS,
    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
    See the License for the specific language governing permissions and
    limitations under the License. -->
    
      <div class="section">
<h2><a name="Appenders"></a>Appenders</h2>
        
<p>
          Appenders are responsible for delivering LogEvents to their destination. Every Appender must
          implement the <a href="../log4j-core/apidocs/org/apache/logging/log4j/core/Appender.html">Appender</a>
          interface. Most Appenders will extend
          <a href="../log4j-core/apidocs/org/apache/logging/log4j/core/appender/AbstractAppender.html">AbstractAppender</a>
          which adds <a href="../log4j-core/apidocs/org/apache/logging/log4j/core/LifeCycle.html">Lifecycle</a>
          and <a href="../log4j-core/apidocs/org/apache/logging/log4j/core/filter/Filterable.html">Filterable</a>
          support. Lifecycle allows components to finish initialization after configuration has completed and to
          perform cleanup during shutdown. Filterable allows the component to have Filters attached to it which are
          evaluated during event processing.
        </p>
        
<p>
          Appenders usually are only responsible for writing the event data to the target destination. In most cases
          they delegate responsibility for formatting the event to a <a href="layouts.html">layout</a>. Some
          appenders wrap other appenders so that they can modify the LogEvent, handle a failure in an Appender,
          route the event to a subordinate Appender based on advanced Filter criteria or provide similar functionality
          that does not directly format the event for viewing.
        </p>
        
<p>
          Appenders always have a name so that they can be referenced from Loggers.
        </p>
        <a name="AsyncAppender"></a>
        
<div class="section">
<h3><a name="AsyncAppender"></a>AsyncAppender</h3>
          
<p>The AsyncAppender accepts references to other Appenders and causes LogEvents to be written to them
            on a separate Thread. Note that exceptions while writing to those Appenders will be hidden from
            the application. The AsyncAppender should be configured after the appenders it references to allow it
            to shut down properly.</p>
          
<table border="0" class="bodyTable"><caption align="top">AsyncAppender Parameters</caption>
            
            
<tr class="a">
              
<th>Parameter Name</th>
              
<th>Type</th>
              
<th>Description</th>
            </tr>
            
<tr class="b">
              
<td>AppenderRef</td>
              
<td>String</td>
              
<td>The name of the Appenders to invoke asynchronously. Multiple AppenderRef
                elements can be configured.</td>
            </tr>
            
<tr class="a">
              
<td>blocking</td>
              
<td>boolean</td>
              
<td>If true, the appender will wait until there are free slots in the queue. If false, the event
                will be written to the error appender if the queue is full. The default is true.</td>
            </tr>
            
<tr class="b">
              
<td>bufferSize</td>
              
<td>integer</td>
              
<td>Specifies the maximum number of events that can be queued. The default is 128.</td>
            </tr>
            
<tr class="a">
              
<td>errorRef</td>
              
<td>String</td>
              
<td>The name of the Appender to invoke if none of the appenders can be called, either due to errors
                in the appenders or because the queue is full. If not specified then errors will be ignored.</td>
            </tr>
            
<tr class="b">
              
<td>filter</td>
              
<td>Filter</td>
              
<td>A Filter to determine if the event should be handled by this Appender. More than one Filter
                may be used by using a CompositeFilter.</td>
            </tr>
            
<tr class="a">
              
<td>name</td>
              
<td>String</td>
              
<td>The name of the Appender.</td>
            </tr>
            
<tr class="b">
              
<td>ignoreExceptions</td>
              
<td>boolean</td>
              
<td>The default is <tt>true</tt>, causing exceptions encountered while appending events to be
                internally logged and then ignored. When set to <tt>false</tt> exceptions will be propagated to the
                caller, instead. You must set this to <tt>false</tt> when wrapping this Appender in a
                <a href="#FailoverAppender">FailoverAppender</a>.</td>
            </tr>
            
<tr class="a">
              
<td>includeLocation</td>
              
<td>boolean</td>
              
<td>Extracting location is an expensive operation (it can make
              logging 5 - 20 times slower). To improve performance, location is
              not included by default when adding a log event to the queue.
              You can change this by setting includeLocation=&quot;true&quot;.</td>
            </tr>
          </table>
          
<p>
            A typical AsyncAppender configuration might look like:
          </p>

            
<div>
<pre class="prettyprint linenums">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;Configuration status=&quot;warn&quot; name=&quot;MyApp&quot; packages=&quot;&quot;&gt;
  &lt;Appenders&gt;
    &lt;File name=&quot;MyFile&quot; fileName=&quot;logs/app.log&quot;&gt;
      &lt;PatternLayout&gt;
        &lt;Pattern&gt;%d %p %c{1.} [%t] %m%n&lt;/Pattern&gt;
      &lt;/PatternLayout&gt;
    &lt;/File&gt;
    &lt;Async name=&quot;Async&quot;&gt;
      &lt;AppenderRef ref=&quot;MyFile&quot;/&gt;
    &lt;/Async&gt;
  &lt;/Appenders&gt;
  &lt;Loggers&gt;
    &lt;Root level=&quot;error&quot;&gt;
      &lt;AppenderRef ref=&quot;Async&quot;/&gt;
    &lt;/Root&gt;
  &lt;/Loggers&gt;
&lt;/Configuration&gt;</pre></div>
        </div>
        <a name="ConsoleAppender"></a>
        
<div class="section">
<h3><a name="ConsoleAppender"></a>ConsoleAppender</h3>
          
<p>
            As one might expect, the ConsoleAppender writes its output to either System.err or System.out with System.err
            being the default target. A Layout must be provided to format the LogEvent.
          </p>
          
<table border="0" class="bodyTable"><caption align="top">ConsoleAppender Parameters</caption>
            
            
<tr class="a">
              
<th>Parameter Name</th>
              
<th>Type</th>
              
<th>Description</th>
            </tr>
            
<tr class="b">
              
<td>filter</td>
              
<td>Filter</td>
              
<td>A Filter to determine if the event should be handled by this Appender. More than one Filter
              may be used by using a CompositeFilter.</td>
            </tr>
            
<tr class="a">
              
<td>layout</td>
              
<td>Layout</td>
              
<td>The Layout to use to format the LogEvent. If no layout is supplied the default pattern layout
              of &quot;%m%n&quot; will be used.</td>
            </tr>
            
<tr class="b">
              
<td>follow</td>
              
<td>boolean</td>
              
<td>Identifies whether the appender honors reassignments of System.out or System.err
                via System.setOut or System.setErr made after configuration. Note that the follow
                attribute cannot be used with Jansi on Windows.</td>
            </tr>
            
<tr class="a">
              
<td>name</td>
              
<td>String</td>
              
<td>The name of the Appender.</td>
            </tr>
            
<tr class="b">
              
<td>ignoreExceptions</td>
              
<td>boolean</td>
              
<td>The default is <tt>true</tt>, causing exceptions encountered while appending events to be
                internally logged and then ignored. When set to <tt>false</tt> exceptions will be propagated to the
                caller, instead. You must set this to <tt>false</tt> when wrapping this Appender in a
                <a href="#FailoverAppender">FailoverAppender</a>.</td>
            </tr>
            
<tr class="a">
              
<td>target</td>
              
<td>String</td>
              
<td>Either &quot;SYSTEM_OUT&quot; or &quot;SYSTEM_ERR&quot;. The default is &quot;SYSTEM_ERR&quot;.</td>
            </tr>
          </table>
          
<p>
            A typical Console configuration might look like:
          </p>

            
<div>
<pre class="prettyprint linenums">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;Configuration status=&quot;warn&quot; name=&quot;MyApp&quot; packages=&quot;&quot;&gt;
  &lt;Appenders&gt;
    &lt;Console name=&quot;STDOUT&quot; target=&quot;SYSTEM_OUT&quot;&gt;
      &lt;PatternLayout pattern=&quot;%m%n&quot;/&gt;
    &lt;/Console&gt;
  &lt;/Appenders&gt;
  &lt;Loggers&gt;
    &lt;Root level=&quot;error&quot;&gt;
      &lt;AppenderRef ref=&quot;STDOUT&quot;/&gt;
    &lt;/Root&gt;
  &lt;/Loggers&gt;
&lt;/Configuration&gt;</pre></div>
        </div>
        <a name="FailoverAppender"></a>
        
<div class="section">
<h3><a name="FailoverAppender"></a>FailoverAppender</h3>
          
<p>The FailoverAppender wraps a set of appenders. If the primary Appender fails the secondary appenders will be
          tried in order until one succeeds or there are no more secondaries to try.</p>
          
<table border="0" class="bodyTable"><caption align="top">FailoverAppender Parameters</caption>
            
            
<tr class="a">
              
<th>Parameter Name</th>
              
<th>Type</th>
              
<th>Description</th>
            </tr>
            
<tr class="b">
              
<td>filter</td>
              
<td>Filter</td>
              
<td>A Filter to determine if the event should be handled by this Appender. More than one Filter
              may be used by using a CompositeFilter.</td>
            </tr>
            
<tr class="a">
              
<td>primary</td>
              
<td>String</td>
              
<td>The name of the primary Appender to use.</td>
            </tr>
            
<tr class="b">
              
<td>failovers</td>
              
<td>String[]</td>
              
<td>The names of the secondary Appenders to use.</td>
            </tr>

            
<tr class="a">
              
<td>name</td>
              
<td>String</td>
              
<td>The name of the Appender.</td>
            </tr>
            
<tr class="b">
              
<td>retryIntervalSeconds</td>
              
<td>integer</td>
              
<td>The number of seconds that should pass before retrying the primary Appender. The default is 60.</td>
            </tr>
            
<tr class="a">
              
<td>ignoreExceptions</td>
              
<td>boolean</td>
              
<td>The default is <tt>true</tt>, causing exceptions encountered while appending events to be
                internally logged and then ignored. When set to <tt>false</tt> exceptions will be propagated to the
                caller, instead.</td>
            </tr>
            
<tr class="b">
              
<td>target</td>
              
<td>String</td>
              
<td>Either &quot;SYSTEM_OUT&quot; or &quot;SYSTEM_ERR&quot;. The default is &quot;SYSTEM_ERR&quot;.</td>
            </tr>
          </table>
          
<p>
            A Failover configuration might look like:
          </p>

            
<div>
<pre class="prettyprint linenums">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;Configuration status=&quot;warn&quot; name=&quot;MyApp&quot; packages=&quot;&quot;&gt;
  &lt;Appenders&gt;
    &lt;RollingFile name=&quot;RollingFile&quot; fileName=&quot;logs/app.log&quot; filePattern=&quot;logs/app-%d{MM-dd-yyyy}.log.gz&quot;
                 ignoreExceptions=&quot;false&quot;&gt;
      &lt;PatternLayout&gt;
        &lt;Pattern&gt;%d %p %c{1.} [%t] %m%n&lt;/Pattern&gt;
      &lt;/PatternLayout&gt;
      &lt;TimeBasedTriggeringPolicy /&gt;
    &lt;/RollingFile&gt;
    &lt;Console name=&quot;STDOUT&quot; target=&quot;SYSTEM_OUT&quot; ignoreExceptions=&quot;false&quot;&gt;
      &lt;PatternLayout pattern=&quot;%m%n&quot;/&gt;
    &lt;/Console&gt;
    &lt;Failover name=&quot;Failover&quot; primary=&quot;RollingFile&quot;&gt;
      &lt;Failovers&gt;
        &lt;AppenderRef ref=&quot;Console&quot;/&gt;
      &lt;/Failovers&gt;
    &lt;/Failover&gt;
  &lt;/Appenders&gt;
  &lt;Loggers&gt;
    &lt;Root level=&quot;error&quot;&gt;
      &lt;AppenderRef ref=&quot;Failover&quot;/&gt;
    &lt;/Root&gt;
  &lt;/Loggers&gt;
&lt;/Configuration&gt;</pre></div>
        </div>
        <a name="FileAppender"></a>
        
<div class="section">
<h3><a name="FileAppender"></a>FileAppender</h3>
          
<p>The FileAppender is an OutputStreamAppender that writes to the File named in the fileName parameter. The
            FileAppender uses a FileManager (which extends OutputStreamManager) to actually perform the file I/O. While
            FileAppenders from different Configurations cannot be shared, the FileManagers can be if the Manager is
            accessible. For example, two web applications in a servlet container can have their own configuration and
            safely write to the same file if Log4j is in a ClassLoader that is common to both of them.</p>
          
<table border="0" class="bodyTable"><caption align="top">FileAppender Parameters</caption>
            
            
<tr class="a">
              
<th>Parameter Name</th>
              
<th>Type</th>
              
<th>Description</th>
            </tr>
            
<tr class="b">
              
<td>append</td>
              
<td>boolean</td>
              
<td>When true - the default, records will be appended to the end of the file. When set to false,
                the file will be cleared before new records are written.</td>
            </tr>
            
<tr class="a">
              
<td>bufferedIO</td>
              
<td>boolean</td>
              
<td>When true - the default, records will be written to a buffer and the data will be written to
                disk when the buffer is full or, if immediateFlush is set, when the record is written.
                File locking cannot be used with bufferedIO. Performance tests have shown that using buffered I/O
                significantly improves performance, even if immediateFlush is enabled.</td>
            </tr>
            
<tr class="b">
              
<td>bufferSize</td>
              
<td>int</td>
              
<td>When bufferedIO is true, this is the buffer size, the default is 8192 bytes.</td>
            </tr>
            
<tr class="a">
              
<td>filter</td>
              
<td>Filter</td>
              
<td>A Filter to determine if the event should be handled by this Appender. More than one Filter
              may be used by using a CompositeFilter.</td>
            </tr>
            
<tr class="b">
              
<td>fileName</td>
              
<td>String</td>
              
<td>The name of the file to write to. If the file, or any of its parent directories, do not exist,
                they will be created.</td>
            </tr>
            
<tr class="a">
              
<td>immediateFlush</td>
              
<td>boolean</td>
              
<td>
<p>When set to true - the default, each write will be followed by a flush.
                This will guarantee the data is written
                to disk but could impact performance.</p>
                
<p>Flushing after every write is only useful when using this
				appender with synchronous loggers. Asynchronous loggers and
				appenders will automatically flush at the end of a batch of events,
				even if immediateFlush is set to false. This also guarantees
				the data is written to disk but is more efficient.</p>
              </td>
            </tr>
            
<tr class="b">
              
<td>layout</td>
              
<td>Layout</td>
              
<td>The Layout to use to format the LogEvent</td>
            </tr>
            
<tr class="a">
              
<td>locking</td>
              
<td>boolean</td>
              
<td>When set to true, I/O operations will occur only while the file lock is held allowing FileAppenders
                in multiple JVMs and potentially multiple hosts to write to the same file simultaneously. This
                will significantly impact performance so should be used carefully. Furthermore, on many systems
                the file lock is &quot;advisory&quot; meaning that other applications can perform operations on the file
                without acquiring a lock. The default value is false.</td>
            </tr>

            
<tr class="b">
              
<td>name</td>
              
<td>String</td>
              
<td>The name of the Appender.</td>
            </tr>
            
<tr class="a">
              
<td>ignoreExceptions</td>
              
<td>boolean</td>
              
<td>The default is <tt>true</tt>, causing exceptions encountered while appending events to be
                internally logged and then ignored. When set to <tt>false</tt> exceptions will be propagated to the
                caller, instead. You must set this to <tt>false</tt> when wrapping this Appender in a
                <a href="#FailoverAppender">FailoverAppender</a>.</td>
            </tr>
          </table>
          
<p>
            Here is a sample File configuration:
          </p>

            
<div>
<pre class="prettyprint linenums">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;Configuration status=&quot;warn&quot; name=&quot;MyApp&quot; packages=&quot;&quot;&gt;
  &lt;Appenders&gt;
    &lt;File name=&quot;MyFile&quot; fileName=&quot;logs/app.log&quot;&gt;
      &lt;PatternLayout&gt;
        &lt;Pattern&gt;%d %p %c{1.} [%t] %m%n&lt;/Pattern&gt;
      &lt;/PatternLayout&gt;
    &lt;/File&gt;
  &lt;/Appenders&gt;
  &lt;Loggers&gt;
    &lt;Root level=&quot;error&quot;&gt;
      &lt;AppenderRef ref=&quot;MyFile&quot;/&gt;
    &lt;/Root&gt;
  &lt;/Loggers&gt;
&lt;/Configuration&gt;</pre></div>
        </div>
        <a name="FlumeAppender"></a>
        
<div class="section">
<h3><a name="FlumeAppender"></a>FlumeAppender</h3>
          
<p><i>This is an optional component supplied in a separate jar.</i></p>
          
<p><a class="externalLink" href="http://flume.apache.org/index.html">Apache Flume</a> is a distributed, reliable,
            and available system for efficiently collecting, aggregating, and moving large amounts of log data
            from many different sources to a centralized data store. The FlumeAppender takes LogEvents and sends
            them to a Flume agent as serialized Avro events for consumption.</p>
          
<p>
            The Flume Appender supports three modes of operation.
          </p>
            
<ol style="list-style-type: decimal">
              
<li>It can act as a remote Flume client which sends Flume events via Avro to a Flume Agent configured
              with an Avro Source.</li>
              
<li>It can act as an embedded Flume Agent where Flume events pass directly into Flume for processing.</li>
              
<li>It can persist events to a local BerkeleyDB data store and then asynchronously send the events to
              Flume, similar to the embedded Flume Agent but without most of the Flume dependencies.</li>
            </ol>
          
<p>
            Usage as an embedded agent will cause the messages to be directly passed to the Flume Channel and then
            control will be immediately returned to the application. All interaction with remote agents will occur
            asynchronously. Setting the &quot;type&quot; attribute to &quot;Embedded&quot; will force the use of the embedded agent. In
            addition, configuring agent properties in the appender configuration will also cause the embedded agent
            to be used.
          </p>
          
<table border="0" class="bodyTable"><caption align="top">FlumeAppender Parameters</caption>
            
            
<tr class="a">
              
<th>Parameter Name</th>
              
<th>Type</th>
              
<th>Description</th>
            </tr>
            
<tr class="b">
              
<td>agents</td>
              
<td>Agent[]</td>
              
<td>An array of Agents to which the logging events should be sent. If more than one agent is specified
                the first Agent will be the primary and subsequent Agents will be used in the order specified as
                secondaries should the primary Agent fail. Each Agent definition supplies the Agents host and port.
                The specification of agents and properties are mutually exclusive. If both are configured an
                error will result.</td>
            </tr>
            
<tr class="a">
              
<td>agentRetries</td>
              
<td>integer</td>
              
<td>The number of times the agent should be retried before failing to a secondary. This parameter is
                ignored when type=&quot;persistent&quot; is specified (agents are tried once before failing to the next).</td>
            </tr>
            
<tr class="b">
              
<td>batchSize</td>
              
<td>integer</td>
              
<td>Specifies the number of events that should be sent as a batch. The default is 1. <i>This
                parameter only applies to the Flume Appender.</i></td>
            </tr>
            
<tr class="a">
              
<td>compress</td>
              
<td>boolean</td>
              
<td>When set to true the message body will be compressed using gzip</td>
            </tr>
            
<tr class="b">
              
<td>connectTimeoutMillis</td>
              
<td>integer</td>
              
<td>The number of milliseconds Flume will wait before timing out the connection.</td>
            </tr>
            
<tr class="a">
              
<td>dataDir</td>
              
<td>String</td>
              
<td>Directory where the Flume write ahead log should be written. Valid only when embedded is set
                to true and Agent elements are used instead of Property elements.</td>
            </tr>
            
<tr class="b">
              
<td>filter</td>
              
<td>Filter</td>
              
<td>A Filter to determine if the event should be handled by this Appender. More than one Filter
              may be used by using a CompositeFilter.</td>
            </tr>
            
<tr class="a">
              
<td>eventPrefix</td>
              
<td>String</td>
              
<td>The character string to prepend to each event attribute in order to distinguish it from MDC attributes.
                The default is an empty string.</td>
            </tr>
            
<tr class="b">
              
<td>flumeEventFactory</td>
              
<td>FlumeEventFactory</td>
              
<td>Factory that generates the Flume events from Log4j events. The default factory is the
                FlumeAvroAppender itself.</td>
            </tr>
            
<tr class="a">
              
<td>layout</td>
              
<td>Layout</td>
              
<td>The Layout to use to format the LogEvent. If no layout is specified RFC5424Layout will be used.</td>
            </tr>
            
<tr class="b">
              
<td>lockTimeoutRetries</td>
              
<td>integer</td>
              
<td>The number of times to retry if a LockConflictException occurs while writing to Berkeley DB. The
                default is 5.</td>
            </tr>
            
<tr class="a">
              
<td>maxDelayMillis</td>
              
<td>integer</td>
              
<td>The maximum number of milliseconds to wait for batchSize events before publishing the batch.</td>
            </tr>
            
<tr class="b">
              
<td>mdcExcludes</td>
              
<td>String</td>
              
<td>A comma separated list of mdc keys that should be excluded from the FlumeEvent. This is mutually
                exclusive with the mdcIncludes attribute.</td>
            </tr>
            
<tr class="a">
              
<td>mdcIncludes</td>
              
<td>String</td>
              
<td>A comma separated list of mdc keys that should be included in the FlumeEvent. Any keys in the MDC
                not found in the list will be excluded. This option is mutually exclusive with the mdcExcludes
                attribute.</td>
            </tr>
            
<tr class="b">
              
<td>mdcRequired</td>
              
<td>String</td>
              
<td>A comma separated list of mdc keys that must be present in the MDC. If a key is not present a
                LoggingException will be thrown.</td>
            </tr>
            
<tr class="a">
              
<td>mdcPrefix</td>
              
<td>String</td>
              
<td>A string that should be prepended to each MDC key in order to distinguish it from event attributes.
                The default string is &quot;mdc:&quot;.</td>
            </tr>
            
<tr class="b">
              
<td>name</td>
              
<td>String</td>
              
<td>The name of the Appender.</td>
            </tr>
            
<tr class="a">
              
<td>properties</td>
              
<td>Property[]</td>
              
<td>
<p>One or more Property elements that are used to configure the Flume Agent. The properties must be
                configured without the agent name (the appender name is used for this) and no sources can be
                configured. Interceptors can be specified for the source using &quot;sources.log4j-source.interceptors&quot;.
                All other Flume configuration properties are allowed. Specifying both Agent and Property
                elements will result in an error.</p>
                
<p>When used to configure in Persistent mode the valid properties are:</p>
                
<ol style="list-style-type: decimal">
                  
<li>&quot;keyProvider&quot; to specify the name of the plugin to provide the secret key for encryption.</li>
                </ol>
              </td>
            </tr>
            
<tr class="b">
              
<td>requestTimeoutMillis</td>
              
<td>integer</td>
              
<td>The number of milliseconds Flume will wait before timing out the request.</td>
            </tr>
            
<tr class="a">
              
<td>ignoreExceptions</td>
              
<td>boolean</td>
              
<td>The default is <tt>true</tt>, causing exceptions encountered while appending events to be
                internally logged and then ignored. When set to <tt>false</tt> exceptions will be propagated to the
                caller, instead. You must set this to <tt>false</tt> when wrapping this Appender in a
                <a href="#FailoverAppender">FailoverAppender</a>.</td>
            </tr>
            
<tr class="b">
              
<td>type</td>
              
<td>enumeration</td>
              
<td>One of &quot;Avro&quot;, &quot;Embedded&quot;, or &quot;Persistent&quot; to indicate which variation of the Appender is desired.</td>
            </tr>
          </table>
            
<p>
              A sample FlumeAppender configuration that is configured with a primary and a secondary agent,
              compresses the body, and formats the body using the RFC5424Layout:
            </p>

            
<div>
<pre class="prettyprint linenums">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;Configuration status=&quot;warn&quot; name=&quot;MyApp&quot; packages=&quot;&quot;&gt;
  &lt;Appenders&gt;
    &lt;Flume name=&quot;eventLogger&quot; compress=&quot;true&quot;&gt;
      &lt;Agent host=&quot;192.168.10.101&quot; port=&quot;8800&quot;/&gt;
      &lt;Agent host=&quot;192.168.10.102&quot; port=&quot;8800&quot;/&gt;
      &lt;RFC5424Layout enterpriseNumber=&quot;18060&quot; includeMDC=&quot;true&quot; appName=&quot;MyApp&quot;/&gt;
    &lt;/Flume&gt;
  &lt;/Appenders&gt;
  &lt;Loggers&gt;
    &lt;Root level=&quot;error&quot;&gt;
      &lt;AppenderRef ref=&quot;eventLogger&quot;/&gt;
    &lt;/Root&gt;
  &lt;/Loggers&gt;
&lt;/Configuration&gt;</pre></div>
          
<p>
            A sample FlumeAppender configuration that is configured with a primary and a secondary agent,
            compresses the body, formats the body using the RFC5424Layout, and persists encrypted events to disk:
          </p>

            
<div>
<pre class="prettyprint linenums">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;Configuration status=&quot;warn&quot; name=&quot;MyApp&quot; packages=&quot;&quot;&gt;
  &lt;Appenders&gt;
    &lt;Flume name=&quot;eventLogger&quot; compress=&quot;true&quot; type=&quot;persistent&quot; dataDir=&quot;./logData&quot;&gt;
      &lt;Agent host=&quot;192.168.10.101&quot; port=&quot;8800&quot;/&gt;
      &lt;Agent host=&quot;192.168.10.102&quot; port=&quot;8800&quot;/&gt;
      &lt;RFC5424Layout enterpriseNumber=&quot;18060&quot; includeMDC=&quot;true&quot; appName=&quot;MyApp&quot;/&gt;
      &lt;Property name=&quot;keyProvider&quot;&gt;MySecretProvider&lt;/Property&gt;
    &lt;/Flume&gt;
  &lt;/Appenders&gt;
  &lt;Loggers&gt;
    &lt;Root level=&quot;error&quot;&gt;
      &lt;AppenderRef ref=&quot;eventLogger&quot;/&gt;
    &lt;/Root&gt;
  &lt;/Loggers&gt;
&lt;/Configuration&gt;</pre></div>
          
<p>
            A sample FlumeAppender configuration that is configured with a primary and a secondary agent,
            compresses the body, formats the body using RFC5424Layout and passes the events to an embedded Flume
            Agent.
          </p>
          
<div>
<pre class="prettyprint linenums">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;Configuration status=&quot;warn&quot; name=&quot;MyApp&quot; packages=&quot;&quot;&gt;
  &lt;Appenders&gt;
    &lt;Flume name=&quot;eventLogger&quot; compress=&quot;true&quot; type=&quot;Embedded&quot;&gt;
      &lt;Agent host=&quot;192.168.10.101&quot; port=&quot;8800&quot;/&gt;
      &lt;Agent host=&quot;192.168.10.102&quot; port=&quot;8800&quot;/&gt;
      &lt;RFC5424Layout enterpriseNumber=&quot;18060&quot; includeMDC=&quot;true&quot; appName=&quot;MyApp&quot;/&gt;
    &lt;/Flume&gt;
    &lt;Console name=&quot;STDOUT&quot;&gt;
      &lt;PatternLayout pattern=&quot;%d [%p] %c %m%n&quot;/&gt;
    &lt;/Console&gt;
  &lt;/Appenders&gt;
  &lt;Loggers&gt;
    &lt;Logger name=&quot;EventLogger&quot; level=&quot;info&quot;&gt;
      &lt;AppenderRef ref=&quot;eventLogger&quot;/&gt;
    &lt;/Logger&gt;
    &lt;Root level=&quot;warn&quot;&gt;
      &lt;AppenderRef ref=&quot;STDOUT&quot;/&gt;
    &lt;/Root&gt;
  &lt;/Loggers&gt;
&lt;/Configuration&gt;</pre></div>
          
<p>
            A sample FlumeAppender configuration that is configured with a primary and a secondary agent using
            Flume configuration properties, compresses the body, formats the body using RFC5424Layout and passes the
            events to an embedded Flume Agent.
          </p>
          
<div>
<pre class="prettyprint linenums">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;Configuration status=&quot;error&quot; name=&quot;MyApp&quot; packages=&quot;&quot;&gt;
  &lt;Appenders&gt;
    &lt;Flume name=&quot;eventLogger&quot; compress=&quot;true&quot; type=&quot;Embedded&quot;&gt;
      &lt;Property name=&quot;channels&quot;&gt;file&lt;/Property&gt;
      &lt;Property name=&quot;channels.file.type&quot;&gt;file&lt;/Property&gt;
      &lt;Property name=&quot;channels.file.checkpointDir&quot;&gt;target/file-channel/checkpoint&lt;/Property&gt;
      &lt;Property name=&quot;channels.file.dataDirs&quot;&gt;target/file-channel/data&lt;/Property&gt;
      &lt;Property name=&quot;sinks&quot;&gt;agent1 agent2&lt;/Property&gt;
      &lt;Property name=&quot;sinks.agent1.channel&quot;&gt;file&lt;/Property&gt;
      &lt;Property name=&quot;sinks.agent1.type&quot;&gt;avro&lt;/Property&gt;
      &lt;Property name=&quot;sinks.agent1.hostname&quot;&gt;192.168.10.101&lt;/Property&gt;
      &lt;Property name=&quot;sinks.agent1.port&quot;&gt;8800&lt;/Property&gt;
      &lt;Property name=&quot;sinks.agent1.batch-size&quot;&gt;100&lt;/Property&gt;
      &lt;Property name=&quot;sinks.agent2.channel&quot;&gt;file&lt;/Property&gt;
      &lt;Property name=&quot;sinks.agent2.type&quot;&gt;avro&lt;/Property&gt;
      &lt;Property name=&quot;sinks.agent2.hostname&quot;&gt;192.168.10.102&lt;/Property&gt;
      &lt;Property name=&quot;sinks.agent2.port&quot;&gt;8800&lt;/Property&gt;
      &lt;Property name=&quot;sinks.agent2.batch-size&quot;&gt;100&lt;/Property&gt;
      &lt;Property name=&quot;sinkgroups&quot;&gt;group1&lt;/Property&gt;
      &lt;Property name=&quot;sinkgroups.group1.sinks&quot;&gt;agent1 agent2&lt;/Property&gt;
      &lt;Property name=&quot;sinkgroups.group1.processor.type&quot;&gt;failover&lt;/Property&gt;
      &lt;Property name=&quot;sinkgroups.group1.processor.priority.agent1&quot;&gt;10&lt;/Property&gt;
      &lt;Property name=&quot;sinkgroups.group1.processor.priority.agent2&quot;&gt;5&lt;/Property&gt;
      &lt;RFC5424Layout enterpriseNumber=&quot;18060&quot; includeMDC=&quot;true&quot; appName=&quot;MyApp&quot;/&gt;
    &lt;/Flume&gt;
    &lt;Console name=&quot;STDOUT&quot;&gt;
      &lt;PatternLayout pattern=&quot;%d [%p] %c %m%n&quot;/&gt;
    &lt;/Console&gt;
  &lt;/Appenders&gt;
  &lt;Loggers&gt;
    &lt;Logger name=&quot;EventLogger&quot; level=&quot;info&quot;&gt;
      &lt;AppenderRef ref=&quot;eventLogger&quot;/&gt;
    &lt;/Logger&gt;
    &lt;Root level=&quot;warn&quot;&gt;
      &lt;AppenderRef ref=&quot;STDOUT&quot;/&gt;
    &lt;/Root&gt;
  &lt;/Loggers&gt;
&lt;/Configuration&gt;</pre></div>
        </div>
        <a name="JDBCAppender"></a>
        
<div class="section">
<h3><a name="JDBCAppender"></a>JDBCAppender</h3>
          
<p>The JDBCAppender writes log events to a relational database table using standard JDBC. It can be configured
            to obtain JDBC connections using a JNDI <tt>DataSource</tt> or a custom factory method. Whichever
            approach you take, it <b><i>must</i></b> be backed by a connection pool. Otherwise, logging
            performance will suffer greatly.</p>
          
<table border="0" class="bodyTable"><caption align="top">JDBCAppender Parameters</caption>
            
            
<tr class="a">
              
<th>Parameter Name</th>
              
<th>Type</th>
              
<th>Description</th>
            </tr>
            
<tr class="b">
              
<td>name</td>
              
<td>String</td>
              
<td><i>Required.</i> The name of the Appender.</td>
            </tr>
            
<tr class="a">
              
<td>ignoreExceptions</td>
              
<td>boolean</td>
              
<td>The default is <tt>true</tt>, causing exceptions encountered while appending events to be
                internally logged and then ignored. When set to <tt>false</tt> exceptions will be propagated to the
                caller, instead. You must set this to <tt>false</tt> when wrapping this Appender in a
                <a href="#FailoverAppender">FailoverAppender</a>.</td>
            </tr>
            
<tr class="b">
              
<td>filter</td>
              
<td>Filter</td>
              
<td>A Filter to determine if the event should be handled by this Appender. More than one Filter may be
                used by using a CompositeFilter.</td>
            </tr>
            
<tr class="a">
              
<td>bufferSize</td>
              
<td>int</td>
              
<td>If an integer greater than 0, this causes the appender to buffer log events and flush whenever the
                buffer reaches this size.</td>
            </tr>
            
<tr class="b">
              
<td>connectionSource</td>
              
<td>ConnectionSource</td>
              
<td><i>Required.</i> The connections source from which database connections should be retrieved.</td>
            </tr>
            
<tr class="a">
              
<td>tableName</td>
              
<td>String</td>
              
<td><i>Required.</i> The name of the database table to insert log events into.</td>
            </tr>
            
<tr class="b">
              
<td>columnConfigs</td>
              
<td>ColumnConfig[]</td>
              
<td><i>Required.</i> Information about the columns that log event data should be inserted into and how
                to insert that data. This is represented with multiple <tt>&lt;Column&gt;</tt> elements.</td>
            </tr>
          </table>
          
<p>When configuring the JDBCAppender, you must specify a <tt>ConnectionSource</tt> implementation from
            which the Appender gets JDBC connections. You must use exactly one of the <tt>&lt;DataSource&gt;</tt>
            or <tt>&lt;ConnectionFactory&gt;</tt> nested elements.</p>
          
<table border="0" class="bodyTable"><caption align="top">DataSource Parameters</caption>
            
            
<tr class="a">
              
<th>Parameter Name</th>
              
<th>Type</th>
              
<th>Description</th>
            </tr>
            
<tr class="b">
              
<td>jndiName</td>
              
<td>String</td>
              
<td><i>Required.</i> The full, prefixed JNDI name that the <tt>javax.sql.DataSource</tt> is bound
                to, such as <tt>java:/comp/env/jdbc/LoggingDatabase</tt>. The <tt>DataSource</tt> must be backed
                by a connection pool; otherwise, logging will be very slow.</td>
            </tr>
          </table>
          
<table border="0" class="bodyTable"><caption align="top">ConnectionFactory Parameters</caption>
            
            
<tr class="a">
              
<th>Parameter Name</th>
              
<th>Type</th>
              
<th>Description</th>
            </tr>
            
<tr class="b">
              
<td>class</td>
              
<td>Class</td>
              
<td><i>Required.</i> The fully qualified name of a class containing a static factory method for
                obtaining JDBC connections.</td>
            </tr>
            
<tr class="a">
              
<td>method</td>
              
<td>Method</td>
              
<td><i>Required.</i> The name of a static factory method for obtaining JDBC connections. This method
                must have no parameters and its return type must be either <tt>java.sql.Connection</tt> or
                <tt>DataSource</tt>. If the method returns <tt>Connection</tt>s, it must obtain them from a
                connection pool (and they will be returned to the pool when Log4j is done with them); otherwise, logging
                will be very slow. If the method returns a <tt>DataSource</tt>, the <tt>DataSource</tt> will
                only be retrieved once, and it must be backed by a connection pool for the same reasons.</td>
            </tr>
          </table>
          
<p>When configuring the JDBCAppender, use the nested <tt>&lt;Column&gt;</tt> elements to specify which
            columns in the table should be written to and how to write to them. The JDBCAppender uses this information
            to formulate a <tt>PreparedStatement</tt> to insert records without SQL injection vulnerability.</p>
          
<table border="0" class="bodyTable"><caption align="top">Column Parameters</caption>
            
            
<tr class="a">
              
<th>Parameter Name</th>
              
<th>Type</th>
              
<th>Description</th>
            </tr>
            
<tr class="b">
              
<td>name</td>
              
<td>String</td>
              
<td><i>Required.</i> The name of the database column.</td>
            </tr>
            
<tr class="a">
              
<td>pattern</td>
              
<td>String</td>
              
<td>Use this attribute to insert a value or values from the log event in this column using a
                <tt>PatternLayout</tt> pattern. Simply specify any legal pattern in this attribute. Either this
                attribute, <tt>literal</tt>, or <tt>isEventTimestamp=&quot;true&quot;</tt> must be specified, but not more
                than one of these.</td>
            </tr>
            
<tr class="b">
              
<td>literal</td>
              
<td>String</td>
              
<td>Use this attribute to insert a literal value in this column. The value will be included directly in
                the insert SQL, without any quoting (which means that if you want this to be a string, your value should
                contain single quotes around it like this: <tt>literal=&quot;'Literal String'&quot;</tt>). This is especially
                useful for databases that don't support identity columns. For example, if you are using Oracle you could
                specify <tt>literal=&quot;NAME_OF_YOUR_SEQUENCE.NEXTVAL&quot;</tt> to insert a unique ID in an ID column.
                Either this attribute, <tt>pattern</tt>, or <tt>isEventTimestamp=&quot;true&quot;</tt> must be specified,
                but not more than one of these.</td>
            </tr>
            
<tr class="a">
              
<td>isEventTimestamp</td>
              
<td>boolean</td>
              
<td>Use this attribute to insert the event timestamp in this column, which should be a SQL datetime. The
                value will be inserted as a <tt>java.sql.Types.TIMESTAMP</tt>. Either this attribute (equal to
                <tt>true</tt>), <tt>pattern</tt>, or <tt>isEventTimestamp</tt> must be specified, but not
                more than one of these.</td>
            </tr>
            
<tr class="b">
              
<td>isUnicode</td>
              
<td>boolean</td>
              
<td>This attribute is ignored unless <tt>pattern</tt> is specified. If <tt>true</tt> or omitted
                (default), the value will be inserted as unicode (<tt>setNString</tt> or <tt>setNClob</tt>).
                Otherwise, the value will be inserted non-unicode (<tt>setString</tt> or <tt>setClob</tt>).</td>
            </tr>
            
<tr class="a">
              
<td>isClob</td>
              
<td>boolean</td>
              
<td>This attribute is ignored unless <tt>pattern</tt> is specified. Use this attribute to indicate
                that the column stores Character Large Objects (CLOBs). If <tt>true</tt>, the value will be inserted
                as a CLOB (<tt>setClob</tt> or <tt>setNClob</tt>). If <tt>false</tt> or omitted (default),
                the value will be inserted as a VARCHAR or NVARCHAR (<tt>setString</tt> or <tt>setNString</tt>).
              </td>
            </tr>
          </table>
          
<p>
            Here are a couple sample configurations for the JDBCAppender, as well as a sample factory implementation
            that uses Commons Pooling and Commons DBCP to pool database connections:
          </p>

            
<div>
<pre class="prettyprint linenums lang-xml">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;Configuration status=&quot;error&quot;&gt;
  &lt;Appenders&gt;
    &lt;JDBC name=&quot;databaseAppender&quot; tableName=&quot;dbo.application_log&quot;&gt;
      &lt;DataSource jndiName=&quot;java:/comp/env/jdbc/LoggingDataSource&quot; /&gt;
      &lt;Column name=&quot;eventDate&quot; isEventTimestamp=&quot;true&quot; /&gt;
      &lt;Column name=&quot;level&quot; pattern=&quot;%level&quot; /&gt;
      &lt;Column name=&quot;logger&quot; pattern=&quot;%logger&quot; /&gt;
      &lt;Column name=&quot;message&quot; pattern=&quot;%message&quot; /&gt;
      &lt;Column name=&quot;exception&quot; pattern=&quot;%ex{full}&quot; /&gt;
    &lt;/JDBC&gt;
  &lt;/Appenders&gt;
  &lt;Loggers&gt;
    &lt;Root level=&quot;warn&quot;&gt;
      &lt;AppenderRef ref=&quot;databaseAppender&quot;/&gt;
    &lt;/Root&gt;
  &lt;/Loggers&gt;
&lt;/Configuration&gt;</pre></div>

            
<div>
<pre class="prettyprint linenums lang-xml">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;Configuration status=&quot;error&quot;&gt;
  &lt;Appenders&gt;
    &lt;JDBC name=&quot;databaseAppender&quot; tableName=&quot;LOGGING.APPLICATION_LOG&quot;&gt;
      &lt;ConnectionFactory class=&quot;net.example.db.ConnectionFactory&quot; method=&quot;getDatabaseConnection&quot; /&gt;
      &lt;Column name=&quot;EVENT_ID&quot; literal=&quot;LOGGING.APPLICATION_LOG_SEQUENCE.NEXTVAL&quot; /&gt;
      &lt;Column name=&quot;EVENT_DATE&quot; isEventTimestamp=&quot;true&quot; /&gt;
      &lt;Column name=&quot;LEVEL&quot; pattern=&quot;%level&quot; /&gt;
      &lt;Column name=&quot;LOGGER&quot; pattern=&quot;%logger&quot; /&gt;
      &lt;Column name=&quot;MESSAGE&quot; pattern=&quot;%message&quot; /&gt;
      &lt;Column name=&quot;THROWABLE&quot; pattern=&quot;%ex{full}&quot; /&gt;
    &lt;/JDBC&gt;
  &lt;/Appenders&gt;
  &lt;Loggers&gt;
    &lt;Root level=&quot;warn&quot;&gt;
      &lt;AppenderRef ref=&quot;databaseAppender&quot;/&gt;
    &lt;/Root&gt;
  &lt;/Loggers&gt;
&lt;/Configuration&gt;</pre></div>
            
<div>
<pre class="prettyprint linenums lang-java">package net.example.db;

import java.sql.Connection;
import java.sql.SQLException;
import java.util.Properties;

import javax.sql.DataSource;

import org.apache.commons.dbcp.DriverManagerConnectionFactory;
import org.apache.commons.dbcp.PoolableConnection;
import org.apache.commons.dbcp.PoolableConnectionFactory;
import org.apache.commons.dbcp.PoolingDataSource;
import org.apache.commons.pool.impl.GenericObjectPool;

public class ConnectionFactory {
    private static interface Singleton {
        final ConnectionFactory INSTANCE = new ConnectionFactory();
    }

    private final DataSource dataSource;

    private ConnectionFactory() {
        Properties properties = new Properties();
        properties.setProperty(&quot;user&quot;, &quot;logging&quot;);
        properties.setProperty(&quot;password&quot;, &quot;abc123&quot;); // or get properties from some configuration file

        GenericObjectPool&lt;PoolableConnection&gt; pool = new GenericObjectPool&lt;PoolableConnection&gt;();
        DriverManagerConnectionFactory connectionFactory = new DriverManagerConnectionFactory(
                &quot;jdbc:mysql://example.org:3306/exampleDb&quot;, properties
        );
        new PoolableConnectionFactory(
                connectionFactory, pool, null, &quot;SELECT 1&quot;, 3, false, false, Connection.TRANSACTION_READ_COMMITTED
        );

        this.dataSource = new PoolingDataSource(pool);
    }

    public static Connection getDatabaseConnection() throws SQLException {
        return Singleton.INSTANCE.dataSource.getConnection();
    }
}</pre></div>
        </div>
        <a name="JMSAppender"></a>
        <!-- cool URLs don't change, so here are some old anchors -->
        <a name="JMSQueueAppender"></a>
        <a name="JMSTopicAppender"></a>
        
<div class="section">
<h3><a name="JMSAppender"></a>JMSAppender</h3>
          
<p>The JMSAppender sends the formatted log event to a JMS Destination.</p>
          
<p>The JMS Appender requires JNDI support so as of release 2.3.1 this appender will not function unless
             <tt>log4j2.enableJndiJms=true</tt> is configured as a system property or environment
             variable. See the <a href="./configuration.html#enableJndiJms">enableJndiJms</a> system property.</p>
          
<p>
            Note that in Log4j 2.0, this appender was split into a JMSQueueAppender and a JMSTopicAppender. Starting
            in Log4j 2.1, these appenders were combined into the JMSAppender which makes no distinction between queues
            and topics. However, configurations written for 2.0 which use the <tt>&lt;JMSQueue/&gt;</tt> or
            <tt>&lt;JMSTopic/&gt;</tt> elements will continue to work with the new <tt>&lt;JMS/&gt;</tt>
            configuration element.
          </p>
          
<table border="0" class="bodyTable"><caption align="top">JMSAppender Parameters</caption>
            
            
<tr class="a">
              
<th>Parameter Name</th>
              
<th>Type</th>
              
<th>Description</th>
            </tr>
            
<tr class="b">
              
<td>factoryBindingName</td>
              
<td>String</td>
              
<td>The name to locate in the Context that provides the
                <a class="javadoc" href="http://download.oracle.com/javaee/5/api/javax/jms/ConnectionFactory.html">ConnectionFactory</a>.
                This can be any subinterface of <tt>ConnectionFactory</tt> as well. This attribute is required.
              </td>
            </tr>
            
<tr class="a">
              
<td>factoryName</td>
              
<td>String</td>
              
<td>The fully qualified class name that should be used to define the Initial Context Factory as defined in
                <a class="javadoc" href="http://download.oracle.com/javase/6/docs/api/javax/naming/Context.html#INITIAL_CONTEXT_FACTORY">INITIAL_CONTEXT_FACTORY</a>.
                If no value is provided the
                default InitialContextFactory will be used. If a factoryName is specified without a providerURL
                a warning message will be logged as this is likely to cause problems.</td>
            </tr>
            
<tr class="b">
              
<td>filter</td>
              
<td>Filter</td>
              
<td>A Filter to determine if the event should be handled by this Appender. More than one Filter
              may be used by using a CompositeFilter.</td>
            </tr>
            
<tr class="a">
              
<td>layout</td>
              
<td>Layout</td>
              
<td>
                The Layout to use to format the LogEvent. If you do not specify a layout,
                this appender will use a <a href="layouts.html#SerializedLayout">SerializedLayout</a>.
              </td>
            </tr>
            
<tr class="b">
              
<td>name</td>
              
<td>String</td>
              
<td>The name of the Appender. Required.</td>
            </tr>
            
<tr class="a">
              
<td>password</td>
              
<td>String</td>
              
<td>The password to use to create the JMS connection.</td>
            </tr>
            
<tr class="b">
              
<td>providerURL</td>
              
<td>String</td>
              
<td>The URL of the provider to use as defined by
                <a class="javadoc" href="http://download.oracle.com/javase/6/docs/api/javax/naming/Context.html#PROVIDER_URL">PROVIDER_URL</a>.
                If this value is null the default system provider will be used.</td>
            </tr>
            
<tr class="a">
              
<td>destinationBindingName</td>
              
<td>String</td>
              
<td>
                The name to use to locate the
                <a class="javadoc" href="http://download.oracle.com/javaee/5/api/javax/jms/Destination.html">Destination</a>.
                This can be a <tt>Queue</tt> or <tt>Topic</tt>, and as such, the attribute names
                <tt>queueBindingName</tt> and <tt>topicBindingName</tt> are aliases to maintain compatibility
                with the Log4j 2.0 JMS appenders.
              </td>
            </tr>
            
<tr class="b">
              
<td>securityPrincipalName</td>
              
<td>String</td>
              
<td>The name of the identity of the Principal as specified by
                <a class="javadoc" href="http://download.oracle.com/javase/6/docs/api/javax/naming/Context.html#SECURITY_PRINCIPAL">SECURITY_PRINCIPAL</a>.
                If a securityPrincipalName is specified without securityCredentials a warning message will be
                logged as this is likely to cause problems.</td>
            </tr>
            
<tr class="a">
              
<td>securityCredentials</td>
              
<td>String</td>
              
<td>The security credentials for the principal as specified by
                <a class="javadoc" href="http://download.oracle.com/javase/6/docs/api/javax/naming/Context.html#SECURITY_CREDENTIALS">SECURITY_CREDENTIALS</a>.
              </td>
            </tr>
            
<tr class="b">
              
<td>ignoreExceptions</td>
              
<td>boolean</td>
              
<td>The default is <tt>true</tt>, causing exceptions encountered while appending events to be
                internally logged and then ignored. When set to <tt>false</tt> exceptions will be propagated to the
                caller, instead. You must set this to <tt>false</tt> when wrapping this Appender in a
                <a href="#FailoverAppender">FailoverAppender</a>.</td>
            </tr>
            
<tr class="a">
              
<td>urlPkgPrefixes</td>
              
<td>String</td>
              
<td>A colon-separated list of package prefixes for the class name of the factory class that will create
                a URL context factory as defined by
                <a class="javadoc" href="http://download.oracle.com/javase/6/docs/api/javax/naming/Context.html#URL_PKG_PREFIXES">URL_PKG_PREFIXES</a>.
              </td>
            </tr>
            
<tr class="b">
              
<td>userName</td>
              
<td>String</td>
              
<td>The user id used to create the JMS connection.</td>
            </tr>
          </table>
          
<p>
            Here is a sample JMSAppender configuration:
          </p>

            
<div>
<pre class="prettyprint linenums">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;Configuration status=&quot;warn&quot; name=&quot;MyApp&quot;&gt;
  &lt;Appenders&gt;
    &lt;JMS name=&quot;jmsQueue&quot; destinationBindingName=&quot;MyQueue&quot;
         factoryBindingName=&quot;MyQueueConnectionFactory&quot;/&gt;
  &lt;/Appenders&gt;
  &lt;Loggers&gt;
    &lt;Root level=&quot;error&quot;&gt;
      &lt;AppenderRef ref=&quot;jmsQueue&quot;/&gt;
    &lt;/Root&gt;
  &lt;/Loggers&gt;
&lt;/Configuration&gt;</pre></div>
        </div>
        <a name="JPAAppender"></a>
        
<div class="section">
<h3><a name="JPAAppender"></a>JPAAppender</h3>
          
<p>The JPAAppender writes log events to a relational database table using the Java Persistence API 2.1.
            It requires the API and a provider implementation be on the classpath. It also requires a decorated entity
            configured to persist to the table desired. The entity should either extend
            <tt>org.apache.logging.log4j.core.appender.db.jpa.BasicLogEventEntity</tt> (if you mostly want to
            use the default mappings) and provide at least an <tt>@Id</tt> property, or
            <tt>org.apache.logging.log4j.core.appender.db.jpa.AbstractLogEventWrapperEntity</tt> (if you want
            to significantly customize the mappings). See the Javadoc for these two classes for more information. You
            can also consult the source code of these two classes as an example of how to implement the entity.</p>
          
<table border="0" class="bodyTable"><caption align="top">JPAAppender Parameters</caption>
            
            
<tr class="a">
              
<th>Parameter Name</th>
              
<th>Type</th>
              
<th>Description</th>
            </tr>
            
<tr class="b">
              
<td>name</td>
              
<td>String</td>
              
<td><i>Required.</i> The name of the Appender.</td>
            </tr>
            
<tr class="a">
              
<td>ignoreExceptions</td>
              
<td>boolean</td>
              
<td>The default is <tt>true</tt>, causing exceptions encountered while appending events to be
                internally logged and then ignored. When set to <tt>false</tt> exceptions will be propagated to the
                caller, instead. You must set this to <tt>false</tt> when wrapping this Appender in a
                <a href="#FailoverAppender">FailoverAppender</a>.</td>
            </tr>
            
<tr class="b">
              
<td>filter</td>
              
<td>Filter</td>
              
<td>A Filter to determine if the event should be handled by this Appender. More than one Filter may be
                used by using a CompositeFilter.</td>
            </tr>
            
<tr class="a">
              
<td>bufferSize</td>
              
<td>int</td>
              
<td>If an integer greater than 0, this causes the appender to buffer log events and flush whenever the
                buffer reaches this size.</td>
            </tr>
            
<tr class="b">
              
<td>entityClassName</td>
              
<td>String</td>
              
<td><i>Required.</i> The fully qualified name of the concrete LogEventWrapperEntity implementation that
                has JPA annotations mapping it to a database table.</td>
            </tr>
            
<tr class="a">
              
<td>persistenceUnitName</td>
              
<td>String</td>
              
<td><i>Required.</i> The name of the JPA persistence unit that should be used for persisting log
                events.</td>
            </tr>
          </table>
          
<p>
            Here is a sample configuration for the JPAAppender. The first XML sample is the Log4j configuration file,
            the second is the <tt>persistence.xml</tt> file. EclipseLink is assumed here, but any JPA 2.1 or higher
            provider will do. You should <i>always</i> create a <i>separate</i> persistence unit for logging, for
            two reasons. First, <tt>&lt;shared-cache-mode&gt;</tt> <i>must</i> be set to &quot;NONE,&quot; which is usually
            not desired in normal JPA usage. Also, for performance reasons the logging entity should be isolated in its
            own persistence unit away from all other entities and you should use a non-JTA data source. Note that your
            persistence unit <i>must</i> also contain <tt>&lt;class&gt;</tt> elements for all of the
            <tt>org.apache.logging.log4j.core.appender.db.jpa.converter</tt> converter classes.
          </p>

            
<div>
<pre class="prettyprint linenums lang-xml">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;Configuration status=&quot;error&quot;&gt;
  &lt;Appenders&gt;
    &lt;JPA name=&quot;databaseAppender&quot; persistenceUnitName=&quot;loggingPersistenceUnit&quot;
         entityClassName=&quot;com.example.logging.JpaLogEntity&quot; /&gt;
  &lt;/Appenders&gt;
  &lt;Loggers&gt;
    &lt;Root level=&quot;warn&quot;&gt;
      &lt;AppenderRef ref=&quot;databaseAppender&quot;/&gt;
    &lt;/Root&gt;
  &lt;/Loggers&gt;
&lt;/Configuration&gt;</pre></div>

            
<div>
<pre class="prettyprint linenums lang-xml">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;persistence xmlns=&quot;http://xmlns.jcp.org/xml/ns/persistence&quot;
             xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;
             xsi:schemaLocation=&quot;http://xmlns.jcp.org/xml/ns/persistence
                                 http://xmlns.jcp.org/xml/ns/persistence/persistence_2_1.xsd&quot;
             version=&quot;2.1&quot;&gt;

  &lt;persistence-unit name=&quot;loggingPersistenceUnit&quot; transaction-type=&quot;RESOURCE_LOCAL&quot;&gt;
    &lt;provider&gt;org.eclipse.persistence.jpa.PersistenceProvider&lt;/provider&gt;
    &lt;class&gt;org.apache.logging.log4j.core.appender.db.jpa.converter.ContextMapAttributeConverter&lt;/class&gt;
    &lt;class&gt;org.apache.logging.log4j.core.appender.db.jpa.converter.ContextMapJsonAttributeConverter&lt;/class&gt;
    &lt;class&gt;org.apache.logging.log4j.core.appender.db.jpa.converter.ContextStackAttributeConverter&lt;/class&gt;
    &lt;class&gt;org.apache.logging.log4j.core.appender.db.jpa.converter.ContextStackJsonAttributeConverter&lt;/class&gt;
    &lt;class&gt;org.apache.logging.log4j.core.appender.db.jpa.converter.MarkerAttributeConverter&lt;/class&gt;
    &lt;class&gt;org.apache.logging.log4j.core.appender.db.jpa.converter.MessageAttributeConverter&lt;/class&gt;
    &lt;class&gt;org.apache.logging.log4j.core.appender.db.jpa.converter.StackTraceElementAttributeConverter&lt;/class&gt;
    &lt;class&gt;org.apache.logging.log4j.core.appender.db.jpa.converter.ThrowableAttributeConverter&lt;/class&gt;
    &lt;class&gt;com.example.logging.JpaLogEntity&lt;/class&gt;
    &lt;non-jta-data-source&gt;jdbc/LoggingDataSource&lt;/non-jta-data-source&gt;
    &lt;shared-cache-mode&gt;NONE&lt;/shared-cache-mode&gt;
  &lt;/persistence-unit&gt;

&lt;/persistence&gt;</pre></div>

            
<div>
<pre class="prettyprint linenums lang-java">package com.example.logging;
...
@Entity
@Table(name=&quot;application_log&quot;, schema=&quot;dbo&quot;)
public class JpaLogEntity extends BasicLogEventEntity {
    private static final long serialVersionUID = 1L;
    private long id = 0L;

    public TestEntity() {
        super(null);
    }
    public TestEntity(LogEvent wrappedEvent) {
        super(wrappedEvent);
    }

    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    @Column(name = &quot;id&quot;)
    public long getId() {
        return this.id;
    }

    public void setId(long id) {
        this.id = id;
    }

    // If you want to override the mapping of any properties mapped in BasicLogEventEntity,
    // just override the getters and re-specify the annotations.
}</pre></div>

            
<div>
<pre class="prettyprint linenums lang-java">package com.example.logging;
...
@Entity
@Table(name=&quot;application_log&quot;, schema=&quot;dbo&quot;)
public class JpaLogEntity extends AbstractLogEventWrapperEntity {
    private static final long serialVersionUID = 1L;
    private long id = 0L;

    public TestEntity() {
        super(null);
    }
    public TestEntity(LogEvent wrappedEvent) {
        super(wrappedEvent);
    }

    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    @Column(name = &quot;logEventId&quot;)
    public long getId() {
        return this.id;
    }

    public void setId(long id) {
        this.id = id;
    }

    @Override
    @Enumerated(EnumType.STRING)
    @Column(name = &quot;level&quot;)
    public Level getLevel() {
        return this.getWrappedEvent().getLevel();
    }

    @Override
    @Column(name = &quot;logger&quot;)
    public String getLoggerName() {
        return this.getWrappedEvent().getLoggerName();
    }

    @Override
    @Column(name = &quot;message&quot;)
    @Convert(converter = MyMessageConverter.class)
    public Message getMessage() {
        return this.getWrappedEvent().getMessage();
    }
    ...
}</pre></div>
        </div>
      <a name="MemoryMappedFileAppender"></a>
      
<div class="section">
<h3><a name="MemoryMappedFileAppender"></a>MemoryMappedFileAppender</h3>
        
<p><i>New since 2.1. Be aware that this is a new addition, and although it has been
          tested on several platforms, it does not have as much track record as the other file appenders.</i></p>
        
<p>
          The MemoryMappedFileAppender maps a part of the specified file into memory
          and writes log events to this memory, relying on the operating system's
          virtual memory manager to synchronize the changes to the storage device.
          The main benefit of using memory mapped files is I/O performance. Instead of making system
          calls to write to disk, this appender can simply change the program's local memory,
          which is orders of magnitude faster. Also, in most operating systems the memory
          region mapped actually is the kernel's <a class="externalLink" href="http://en.wikipedia.org/wiki/Page_cache">page
          cache</a> (file cache), meaning that no copies need to be created in user space.
          (TODO: performance tests that compare performance of this appender to
          RandomAccessFileAppender and FileAppender.)
        </p>
        
<p>
          There is some overhead with mapping a file region into memory,
          especially very large regions (half a gigabyte or more).
          The default region size is 32 MB, which should strike a reasonable balance
          between the frequency and the duration of remap operations.
          (TODO: performance test remapping various sizes.)
        </p>
        
<p>
          Similar to the FileAppender and the RandomAccessFileAppender,
          MemoryMappedFileAppender uses a MemoryMappedFileManager to actually perform the
          file I/O. While MemoryMappedFileAppender from different Configurations
          cannot be shared, the MemoryMappedFileManagers can be if the Manager is
          accessible. For example, two web applications in a servlet container can have
          their own configuration and safely write to the same file if Log4j
          is in a ClassLoader that is common to both of them.
        </p>
        
<table border="0" class="bodyTable"><caption align="top">MemoryMappedFileAppender Parameters</caption>
          
          
<tr class="a">
            
<th>Parameter Name</th>
            
<th>Type</th>
            
<th>Description</th>
          </tr>
          
<tr class="b">
            
<td>append</td>
            
<td>boolean</td>
            
<td>When true - the default, records will be appended to the end
              of the file. When set to false, the file will be cleared before
              new records are written.
            </td>
          </tr>
          
<tr class="a">
            
<td>fileName</td>
            
<td>String</td>
            
<td>The name of the file to write to. If the file, or any of its
              parent directories, do not exist, they will be created.
            </td>
          </tr>
          
<tr class="b">
            
<td>filters</td>
            
<td>Filter</td>
            
<td>A Filter to determine if the event should be handled by this
              Appender. More than one Filter may be used by using a CompositeFilter.
            </td>
          </tr>
          
<tr class="a">
            
<td>immediateFlush</td>
            
<td>boolean</td>
            
<td>
              
<p>When set to true, each write will be followed by a
                call to <a class="externalLink" href="http://docs.oracle.com/javase/7/docs/api/java/nio/MappedByteBuffer.html#force()">MappedByteBuffer.force()</a>.
            This will guarantee the data is written to the storage device.
              </p>
              
<p>The default for this parameter is <tt>false</tt>.
                This means that the data is written to the storage device even
                if the Java process crashes, but there may be data loss if the
                operating system crashes.</p>
              
<p>Note that manually forcing a sync on every log event loses most
                of the performance benefits of using a memory mapped file.</p>
              
<p>Flushing after every write is only useful when using this
              appender with synchronous loggers. Asynchronous loggers and
              appenders will automatically flush at the end of a batch of events,
              even if immediateFlush is set to false. This also guarantees
              the data is written to disk but is more efficient.
              </p>
            </td>
          </tr>
          
<tr class="b">
            
<td>regionLength</td>
            
<td>int</td>
            
<td>The length of the mapped region, defaults to 32 MB
              (32 * 1024 * 1024 bytes). This parameter must be a value
              between 256 and 1,073,741,824 (1 GB or 2^30);
              values outside this range will be adjusted to the closest valid
              value.
              Log4j will round the specified value up to the nearest power of two.</td>
          </tr>
          
<tr class="a">
            
<td>layout</td>
            
<td>Layout</td>
            
<td>The Layout to use to format the LogEvent</td>
          </tr>
          
<tr class="b">
            
<td>name</td>
            
<td>String</td>
            
<td>The name of the Appender.</td>
          </tr>
          
<tr class="a">
            
<td>ignoreExceptions</td>
            
<td>boolean</td>
            
<td>The default is <tt>true</tt>, causing exceptions encountered while appending events to be
              internally logged and then ignored. When set to <tt>false</tt> exceptions will be propagated to the
              caller, instead. You must set this to <tt>false</tt> when wrapping this Appender in a
              <a href="#FailoverAppender">FailoverAppender</a>.</td>
          </tr>
        </table>
        
<p>
          Here is a sample MemoryMappedFile configuration:
        </p>

          
<div>
<pre class="prettyprint linenums">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;Configuration status=&quot;warn&quot; name=&quot;MyApp&quot; packages=&quot;&quot;&gt;
  &lt;Appenders&gt;
    &lt;MemoryMappedFile name=&quot;MyFile&quot; fileName=&quot;logs/app.log&quot;&gt;
      &lt;PatternLayout&gt;
        &lt;Pattern&gt;%d %p %c{1.} [%t] %m%n&lt;/Pattern&gt;
      &lt;/PatternLayout&gt;
    &lt;/MemoryMappedFile&gt;
  &lt;/Appenders&gt;
  &lt;Loggers&gt;
    &lt;Root level=&quot;error&quot;&gt;
      &lt;AppenderRef ref=&quot;MyFile&quot;/&gt;
    &lt;/Root&gt;
  &lt;/Loggers&gt;
&lt;/Configuration&gt;</pre></div>
      </div>
        <a name="NoSQLAppender"></a>
        
<div class="section">
<h3><a name="NoSQLAppender"></a>NoSQLAppender</h3>
          
<p>The NoSQLAppender writes log events to a NoSQL database using an internal lightweight provider interface.
            Provider implementations currently exist for MongoDB and Apache CouchDB, and writing a custom provider is
            quite simple.</p>
          
<table border="0" class="bodyTable"><caption align="top">NoSQLAppender Parameters</caption>
            
            
<tr class="a">
              
<th>Parameter Name</th>
              
<th>Type</th>
              
<th>Description</th>
            </tr>
            
<tr class="b">
              
<td>name</td>
              
<td>String</td>
              
<td><i>Required.</i> The name of the Appender.</td>
            </tr>
            
<tr class="a">
              
<td>ignoreExceptions</td>
              
<td>boolean</td>
              
<td>The default is <tt>true</tt>, causing exceptions encountered while appending events to be
                internally logged and then ignored. When set to <tt>false</tt> exceptions will be propagated to the
                caller, instead. You must set this to <tt>false</tt> when wrapping this Appender in a
                <a href="#FailoverAppender">FailoverAppender</a>.</td>
            </tr>
            
<tr class="b">
              
<td>filter</td>
              
<td>Filter</td>
              
<td>A Filter to determine if the event should be handled by this Appender. More than one Filter may be
                used by using a CompositeFilter.</td>
            </tr>
            
<tr class="a">
              
<td>bufferSize</td>
              
<td>int</td>
              
<td>If an integer greater than 0, this causes the appender to buffer log events and flush whenever the
                buffer reaches this size.</td>
            </tr>
            
<tr class="b">
              
<td>NoSqlProvider</td>
              
<td>NoSQLProvider&lt;C extends NoSQLConnection&lt;W, T extends NoSQLObject&lt;W&gt;&gt;&gt;</td>
              
<td><i>Required.</i> The NoSQL provider that provides connections to the chosen NoSQL database.</td>
            </tr>
          </table>
          
<p>You specify which NoSQL provider to use by specifying the appropriate configuration element within the
            <tt>&lt;NoSql&gt;</tt> element. The types currently supported are <tt>&lt;MongoDb&gt;</tt> and
            <tt>&lt;CouchDb&gt;</tt>. To create your own custom provider, read the JavaDoc for the
            <tt>NoSQLProvider</tt>, <tt>NoSQLConnection</tt>, and <tt>NoSQLObject</tt> classes and the
            documentation about creating Log4j plugins. We recommend you review the source code for the MongoDB and
            CouchDB providers as a guide for creating your own provider.</p>
          
<table border="0" class="bodyTable"><caption align="top">MongoDB Provider Parameters</caption>
            
            
<tr class="a">
              
<th>Parameter Name</th>
              
<th>Type</th>
              
<th>Description</th>
            </tr>
            
<tr class="b">
              
<td>collectionName</td>
              
<td>String</td>
              
<td><i>Required.</i> The name of the MongoDB collection to insert the events into.</td>
            </tr>
            
<tr class="a">
              
<td>writeConcernConstant</td>
              
<td>Field</td>
              
<td>By default, the MongoDB provider inserts records with the instructions
                <tt>com.mongodb.WriteConcern.ACKNOWLEDGED</tt>. Use this optional attribute to specify the name of
                a constant other than <tt>ACKNOWLEDGED</tt>.</td>
            </tr>
            
<tr class="b">
              
<td>writeConcernConstantClass</td>
              
<td>Class</td>
              
<td>If you specify <tt>writeConcernConstant</tt>, you can use this attribute to specify a class other
                than <tt>com.mongodb.WriteConcern</tt> to find the constant on (to create your own custom
                instructions).</td>
            </tr>
            
<tr class="a">
              
<td>factoryClassName</td>
              
<td>Class</td>
              
<td>To provide a connection to the MongoDB database, you can use this attribute and
                <tt>factoryMethodName</tt> to specify a class and static method to get the connection from. The
                method must return a <tt>com.mongodb.DB</tt> or a <tt>com.mongodb.MongoClient</tt>. If the
                <tt>DB</tt> is not authenticated, you must also specify a <tt>username</tt> and
                <tt>password</tt>. If you use the factory method for providing a connection, you must not specify
                the <tt>databaseName</tt>, <tt>server</tt>, or <tt>port</tt> attributes.</td>
            </tr>
            
<tr class="b">
              
<td>factoryMethodName</td>
              
<td>Method</td>
              
<td>See the documentation for attribute <tt>factoryClassName</tt>.</td>
            </tr>
            
<tr class="a">
              
<td>databaseName</td>
              
<td>String</td>
              
<td>If you do not specify a <tt>factoryClassName</tt> and <tt>factoryMethodName</tt> for providing
                a MongoDB connection, you must specify a MongoDB database name using this attribute. You must also
                specify a <tt>username</tt> and <tt>password</tt>. You can optionally also specify a
                <tt>server</tt> (defaults to localhost), and a <tt>port</tt> (defaults to the default MongoDB
                port).</td>
            </tr>
            
<tr class="b">
              
<td>server</td>
              
<td>String</td>
              
<td>See the documentation for attribute <tt>databaseName</tt>.</td>
            </tr>
            
<tr class="a">
              
<td>port</td>
              
<td>int</td>
              
<td>See the documentation for attribute <tt>databaseName</tt>.</td>
            </tr>
            
<tr class="b">
              
<td>username</td>
              
<td>String</td>
              
<td>See the documentation for attributes <tt>databaseName</tt> and <tt>factoryClassName</tt>.</td>
            </tr>
            
<tr class="a">
              
<td>password</td>
              
<td>String</td>
              
<td>See the documentation for attributes <tt>databaseName</tt> and <tt>factoryClassName</tt>.</td>
            </tr>
          </table>
          
<table border="0" class="bodyTable"><caption align="top">CouchDB Provider Parameters</caption>
            
            
<tr class="a">
              
<th>Parameter Name</th>
              
<th>Type</th>
              
<th>Description</th>
            </tr>
            
<tr class="b">
              
<td>factoryClassName</td>
              
<td>Class</td>
              
<td>To provide a connection to the CouchDB database, you can use this attribute and
                <tt>factoryMethodName</tt> to specify a class and static method to get the connection from. The
                method must return a <tt>org.lightcouch.CouchDbClient</tt> or a
                <tt>org.lightcouch.CouchDbProperties</tt>. If you use the factory method for providing a connection,
                you must not specify the <tt>databaseName</tt>, <tt>protocol</tt>, <tt>server</tt>,
                <tt>port</tt>, <tt>username</tt>, or <tt>password</tt> attributes.</td>
            </tr>
            
<tr class="a">
              
<td>factoryMethodName</td>
              
<td>Method</td>
              
<td>See the documentation for attribute <tt>factoryClassName</tt>.</td>
            </tr>
            
<tr class="b">
              
<td>databaseName</td>
              
<td>String</td>
              
<td>If you do not specify a <tt>factoryClassName</tt> and <tt>factoryMethodName</tt> for providing
                a CouchDB connection, you must specify a CouchDB database name using this attribute. You must also
                specify a <tt>username</tt> and <tt>password</tt>. You can optionally also specify a
                <tt>protocol</tt> (defaults to http), <tt>server</tt> (defaults to localhost), and a
                <tt>port</tt> (defaults to 80 for http and 443 for https).</td>
            </tr>
            
<tr class="a">
              
<td>protocol</td>
              
<td>String</td>
              
<td>Must either be &quot;http&quot; or &quot;https.&quot; See the documentation for attribute <tt>databaseName</tt>.</td>
            </tr>
            
<tr class="b">
              
<td>server</td>
              
<td>String</td>
              
<td>See the documentation for attribute <tt>databaseName</tt>.</td>
            </tr>
            
<tr class="a">
              
<td>port</td>
              
<td>int</td>
              
<td>See the documentation for attribute <tt>databaseName</tt>.</td>
            </tr>
            
<tr class="b">
              
<td>username</td>
              
<td>String</td>
              
<td>See the documentation for attributes <tt>databaseName</tt>.</td>
            </tr>
            
<tr class="a">
              
<td>password</td>
              
<td>String</td>
              
<td>See the documentation for attributes <tt>databaseName</tt>.</td>
            </tr>
          </table>
          
<p>
            Here are a few sample configurations for the NoSQLAppender:
          </p>

            
<div>
<pre class="prettyprint linenums lang-xml">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;Configuration status=&quot;error&quot;&gt;
  &lt;Appenders&gt;
    &lt;NoSql name=&quot;databaseAppender&quot;&gt;
      &lt;MongoDb databaseName=&quot;applicationDb&quot; collectionName=&quot;applicationLog&quot; server=&quot;mongo.example.org&quot;
               username=&quot;loggingUser&quot; password=&quot;abc123&quot; /&gt;
    &lt;/NoSql&gt;
  &lt;/Appenders&gt;
  &lt;Loggers&gt;
    &lt;Root level=&quot;warn&quot;&gt;
      &lt;AppenderRef ref=&quot;databaseAppender&quot;/&gt;
    &lt;/Root&gt;
  &lt;/Loggers&gt;
&lt;/Configuration&gt;</pre></div>

            
<div>
<pre class="prettyprint linenums lang-xml">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;Configuration status=&quot;error&quot;&gt;
  &lt;Appenders&gt;
    &lt;NoSql name=&quot;databaseAppender&quot;&gt;
      &lt;MongoDb collectionName=&quot;applicationLog&quot; factoryClassName=&quot;org.example.db.ConnectionFactory&quot;
               factoryMethodName=&quot;getNewMongoClient&quot; /&gt;
    &lt;/NoSql&gt;
  &lt;/Appenders&gt;
  &lt;Loggers&gt;
    &lt;Root level=&quot;warn&quot;&gt;
      &lt;AppenderRef ref=&quot;databaseAppender&quot;/&gt;
    &lt;/Root&gt;
  &lt;/Loggers&gt;
&lt;/Configuration&gt;</pre></div>

            
<div>
<pre class="prettyprint linenums lang-xml">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;Configuration status=&quot;error&quot;&gt;
  &lt;Appenders&gt;
    &lt;NoSql name=&quot;databaseAppender&quot;&gt;
      &lt;CouchDb databaseName=&quot;applicationDb&quot; protocol=&quot;https&quot; server=&quot;couch.example.org&quot;
               username=&quot;loggingUser&quot; password=&quot;abc123&quot; /&gt;
    &lt;/NoSql&gt;
  &lt;/Appenders&gt;
  &lt;Loggers&gt;
    &lt;Root level=&quot;warn&quot;&gt;
      &lt;AppenderRef ref=&quot;databaseAppender&quot;/&gt;
    &lt;/Root&gt;
  &lt;/Loggers&gt;
&lt;/Configuration&gt;</pre></div>
          
<p>
            The following example demonstrates how log events are persisted in NoSQL databases if represented in a JSON
            format:
          </p>
            
<div>
<pre class="prettyprint lang-javascript">{
    &quot;level&quot;: &quot;WARN&quot;,
    &quot;loggerName&quot;: &quot;com.example.application.MyClass&quot;,
    &quot;message&quot;: &quot;Something happened that you might want to know about.&quot;,
    &quot;source&quot;: {
        &quot;className&quot;: &quot;com.example.application.MyClass&quot;,
        &quot;methodName&quot;: &quot;exampleMethod&quot;,
        &quot;fileName&quot;: &quot;MyClass.java&quot;,
        &quot;lineNumber&quot;: 81
    },
    &quot;marker&quot;: {
        &quot;name&quot;: &quot;SomeMarker&quot;,
        &quot;parent&quot; {
            &quot;name&quot;: &quot;SomeParentMarker&quot;
        }
    },
    &quot;threadName&quot;: &quot;Thread-1&quot;,
    &quot;millis&quot;: 1368844166761,
    &quot;date&quot;: &quot;2013-05-18T02:29:26.761Z&quot;,
    &quot;thrown&quot;: {
        &quot;type&quot;: &quot;java.sql.SQLException&quot;,
        &quot;message&quot;: &quot;Could not insert record. Connection lost.&quot;,
        &quot;stackTrace&quot;: [
                { &quot;className&quot;: &quot;org.example.sql.driver.PreparedStatement$1&quot;, &quot;methodName&quot;: &quot;responder&quot;, &quot;fileName&quot;: &quot;PreparedStatement.java&quot;, &quot;lineNumber&quot;: 1049 },
                { &quot;className&quot;: &quot;org.example.sql.driver.PreparedStatement&quot;, &quot;methodName&quot;: &quot;executeUpdate&quot;, &quot;fileName&quot;: &quot;PreparedStatement.java&quot;, &quot;lineNumber&quot;: 738 },
                { &quot;className&quot;: &quot;com.example.application.MyClass&quot;, &quot;methodName&quot;: &quot;exampleMethod&quot;, &quot;fileName&quot;: &quot;MyClass.java&quot;, &quot;lineNumber&quot;: 81 },
                { &quot;className&quot;: &quot;com.example.application.MainClass&quot;, &quot;methodName&quot;: &quot;main&quot;, &quot;fileName&quot;: &quot;MainClass.java&quot;, &quot;lineNumber&quot;: 52 }
        ],
        &quot;cause&quot;: {
            &quot;type&quot;: &quot;java.io.IOException&quot;,
            &quot;message&quot;: &quot;Connection lost.&quot;,
            &quot;stackTrace&quot;: [
                { &quot;className&quot;: &quot;java.nio.channels.SocketChannel&quot;, &quot;methodName&quot;: &quot;write&quot;, &quot;fileName&quot;: null, &quot;lineNumber&quot;: -1 },
                { &quot;className&quot;: &quot;org.example.sql.driver.PreparedStatement$1&quot;, &quot;methodName&quot;: &quot;responder&quot;, &quot;fileName&quot;: &quot;PreparedStatement.java&quot;, &quot;lineNumber&quot;: 1032 },
                { &quot;className&quot;: &quot;org.example.sql.driver.PreparedStatement&quot;, &quot;methodName&quot;: &quot;executeUpdate&quot;, &quot;fileName&quot;: &quot;PreparedStatement.java&quot;, &quot;lineNumber&quot;: 738 },
                { &quot;className&quot;: &quot;com.example.application.MyClass&quot;, &quot;methodName&quot;: &quot;exampleMethod&quot;, &quot;fileName&quot;: &quot;MyClass.java&quot;, &quot;lineNumber&quot;: 81 },
                { &quot;className&quot;: &quot;com.example.application.MainClass&quot;, &quot;methodName&quot;: &quot;main&quot;, &quot;fileName&quot;: &quot;MainClass.java&quot;, &quot;lineNumber&quot;: 52 }
            ]
        }
    },
    &quot;contextMap&quot;: {
        &quot;ID&quot;: &quot;86c3a497-4e67-4eed-9d6a-2e5797324d7b&quot;,
        &quot;username&quot;: &quot;JohnDoe&quot;
    },
    &quot;contextStack&quot;: [
        &quot;topItem&quot;,
        &quot;anotherItem&quot;,
        &quot;bottomItem&quot;
    ]
}</pre></div>
        </div>
        <a name="OutputStreamAppender"></a>
        
<div class="section">
<h3><a name="OutputStreamAppender"></a>OutputStreamAppender</h3>
          
<p>
          The OutputStreamAppender provides the base for many of the other Appenders such as the File and Socket
          appenders that write the event to an Output Stream. It cannot be directly configured. Support for
          immediateFlush and buffering is provided by the OutputStreamAppender. The OutputStreamAppender uses an
          OutputStreamManager to handle the actual I/O, allowing the stream to be shared by Appenders in multiple
          configurations.
          </p>
        </div>
			<a name="RandomAccessFileAppender"></a>
			
<div class="section">
<h3><a name="RandomAccessFileAppender"></a>RandomAccessFileAppender</h3>
			
<p><i>As of beta-9, the name of this appender has been changed from FastFile to
			  RandomAccessFile. Configurations using the <tt>FastFile</tt> element
			  no longer work and should be modified to use the <tt>RandomAccessFile</tt> element.</i></p>
				
<p>
					The RandomAccessFileAppender is similar to the standard
					<a href="#FileAppender">FileAppender</a>
					except it is always buffered (this cannot be switched off)
					and internally it uses a
					<tt>ByteBuffer + RandomAccessFile</tt>
					instead of a
					<tt>BufferedOutputStream</tt>.
					We saw a 20-200% performance improvement compared to
					FileAppender with &quot;bufferedIO=true&quot; in our
					<a href="async.html#RandomAccessFileAppenderPerformance">measurements</a>.
					Similar to the FileAppender,
					RandomAccessFileAppender uses a RandomAccessFileManager to actually perform the
					file I/O. While RandomAccessFileAppender
					from different Configurations
					cannot be shared, the RandomAccessFileManagers can be if the Manager is
					accessible. For example, two web applications in a
					servlet container can have
					their own configuration and safely
					write to the same file if Log4j
					is in a ClassLoader that is common to
					both of them.
				</p>
				
<table border="0" class="bodyTable"><caption align="top">RandomAccessFileAppender Parameters</caption>
          
          
<tr class="a">
						
<th>Parameter Name</th>
						
<th>Type</th>
						
<th>Description</th>
					</tr>
          
<tr class="b">
						
<td>append</td>
						
<td>boolean</td>
						
<td>When true - the default, records will be appended to the end
							of the file. When set to false,
							the file will be cleared before
							new records are written.
						</td>
					</tr>
          
<tr class="a">
						
<td>fileName</td>
						
<td>String</td>
						
<td>The name of the file to write to. If the file, or any of its
							parent directories, do not exist,
							they will be created.
						</td>
					</tr>
          
<tr class="b">
						
<td>filters</td>
						
<td>Filter</td>
						
<td>A Filter to determine if the event should be handled by this
							Appender. More than one Filter
							may be used by using a CompositeFilter.
						</td>
					</tr>
          
<tr class="a">
						
<td>immediateFlush</td>
						
<td>boolean</td>
		                
<td>
                          
<p>
                            When set to true - the default, each write will be followed by a flush.
		                    This will guarantee the data is written
		                    to disk but could impact performance.
                          </p>
		                  
<p>
                            Flushing after every write is only useful when using this
						    appender with synchronous loggers. Asynchronous loggers and
						    appenders will automatically flush at the end of a batch of events,
						    even if immediateFlush is set to false. This also guarantees
						    the data is written to disk but is more efficient.
                          </p>
		                </td>
					</tr>
          
<tr class="b">
                      
<td>bufferSize</td>
                      
<td>int</td>
                      
<td>The buffer size, defaults to 262,144 bytes (256 * 1024).</td>
                    </tr>
          
<tr class="a">
						
<td>layout</td>
						
<td>Layout</td>
						
<td>The Layout to use to format the LogEvent</td>
					</tr>
          
<tr class="b">
						
<td>name</td>
						
<td>String</td>
						
<td>The name of the Appender.</td>
					</tr>
          
<tr class="a">
                      
<td>ignoreExceptions</td>
                      
<td>boolean</td>
                      
<td>The default is <tt>true</tt>, causing exceptions encountered while appending events to be
                        internally logged and then ignored. When set to <tt>false</tt> exceptions will be propagated to the
                        caller, instead. You must set this to <tt>false</tt> when wrapping this Appender in a
                        <a href="#FailoverAppender">FailoverAppender</a>.</td>
                    </tr>
				</table>
				
<p>
					Here is a sample RandomAccessFile configuration:
        </p>

					
<div>
<pre class="prettyprint linenums">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;Configuration status=&quot;warn&quot; name=&quot;MyApp&quot; packages=&quot;&quot;&gt;
  &lt;Appenders&gt;
    &lt;RandomAccessFile name=&quot;MyFile&quot; fileName=&quot;logs/app.log&quot;&gt;
      &lt;PatternLayout&gt;
        &lt;Pattern&gt;%d %p %c{1.} [%t] %m%n&lt;/Pattern&gt;
      &lt;/PatternLayout&gt;
    &lt;/RandomAccessFile&gt;
  &lt;/Appenders&gt;
  &lt;Loggers&gt;
    &lt;Root level=&quot;error&quot;&gt;
      &lt;AppenderRef ref=&quot;MyFile&quot;/&gt;
    &lt;/Root&gt;
  &lt;/Loggers&gt;
&lt;/Configuration&gt;</pre></div>
			</div>
        <a name="RewriteAppender"></a>
        
<div class="section">
<h3><a name="RewriteAppender"></a>RewriteAppender</h3>
          
<p>
            The RewriteAppender allows the LogEvent to manipulated before it is processed by another Appender. This
            can be used to mask sensitive information such as passwords or to inject information into each event.
            The RewriteAppender must be configured with a <a href="RewritePolicy">RewritePolicy</a>. The
            RewriteAppender should be configured after any Appenders it references to allow it to shut down properly.
          </p>
          
<table border="0" class="bodyTable"><caption align="top">RewriteAppender Parameters</caption>
            
            
<tr class="a">
              
<th>Parameter Name</th>
              
<th>Type</th>
              
<th>Description</th>
            </tr>
            
<tr class="b">
              
<td>AppenderRef</td>
              
<td>String</td>
              
<td>The name of the Appenders to call after the LogEvent has been manipulated. Multiple AppenderRef
                elements can be configured.</td>
            </tr>
            
<tr class="a">
              
<td>filter</td>
              
<td>Filter</td>
              
<td>A Filter to determine if the event should be handled by this Appender. More than one Filter
              may be used by using a CompositeFilter.</td>
            </tr>
            
<tr class="b">
              
<td>name</td>
              
<td>String</td>
              
<td>The name of the Appender.</td>
            </tr>
            
<tr class="a">
              
<td>rewritePolicy</td>
              
<td>RewritePolicy</td>
              
<td>The RewritePolicy that will manipulate the LogEvent.</td>
            </tr>
            
<tr class="b">
              
<td>ignoreExceptions</td>
              
<td>boolean</td>
              
<td>The default is <tt>true</tt>, causing exceptions encountered while appending events to be
                internally logged and then ignored. When set to <tt>false</tt> exceptions will be propagated to the
                caller, instead. You must set this to <tt>false</tt> when wrapping this Appender in a
                <a href="#FailoverAppender">FailoverAppender</a>.</td>
            </tr>
          </table>
          
<div class="section">
<h4><a name="RewritePolicy"></a>RewritePolicy</h4>
            
<p>
              RewritePolicy is an interface that allows implementations to inspect and possibly modify LogEvents
              before they are passed to Appender. RewritePolicy declares a single method named rewrite that must
              be implemented. The method is passed the LogEvent and can return the same event or create a new one.
            </p>
            
<div class="section">
<h5><a name="MapRewritePolicy"></a>MapRewritePolicy</h5>
              
<p>
                MapRewritePolicy will evaluate LogEvents that contain a MapMessage and will add or update
                elements of the Map.
              </p>
              
<table border="0" class="bodyTable">
                
<tr class="a">
                  
<th>Parameter Name</th>
                  
<th>Type</th>
                  
<th>Description</th>
                </tr>
                
<tr class="b">
                  
<td>mode</td>
                  
<td>String</td>
                  
<td>&quot;Add&quot; or &quot;Update&quot;</td>
                </tr>
                
<tr class="a">
                  
<td>keyValuePair</td>
                  
<td>KeyValuePair[]</td>
                  
<td>An array of keys and their values.</td>
                </tr>
              </table>
            
<p>
             The following configuration shows a RewriteAppender configured to add a product key and its value
             to the MapMessage.:
            </p>

            
<div>
<pre class="prettyprint linenums">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;Configuration status=&quot;warn&quot; name=&quot;MyApp&quot; packages=&quot;&quot;&gt;
  &lt;Appenders&gt;
    &lt;Console name=&quot;STDOUT&quot; target=&quot;SYSTEM_OUT&quot;&gt;
      &lt;PatternLayout pattern=&quot;%m%n&quot;/&gt;
    &lt;/Console&gt;
    &lt;Rewrite name=&quot;rewrite&quot;&gt;
      &lt;AppenderRef ref=&quot;STDOUT&quot;/&gt;
      &lt;MapRewritePolicy mode=&quot;Add&quot;&gt;
        &lt;KeyValuePair key=&quot;product&quot; value=&quot;TestProduct&quot;/&gt;
      &lt;/MapRewritePolicy&gt;
    &lt;/Rewrite&gt;
  &lt;/Appenders&gt;
  &lt;Loggers&gt;
    &lt;Root level=&quot;error&quot;&gt;
      &lt;AppenderRef ref=&quot;Rewrite&quot;/&gt;
    &lt;/Root&gt;
  &lt;/Loggers&gt;
&lt;/Configuration&gt;</pre></div>
          </div>
<div class="section">
<h5><a name="PropertiesRewritePolicy"></a>PropertiesRewritePolicy</h5>
          
<p>
            PropertiesRewritePolicy will add properties configured on the policy to the ThreadContext Map
            being logged. The properties will not be added to the actual ThreadContext Map. The property
            values may contain variables that will be evaluated when the configuration is processed as
            well as when the event is logged.
          </p>
          
<table border="0" class="bodyTable">
            
<tr class="a">
              
<th>Parameter Name</th>
              
<th>Type</th>
              
<th>Description</th>
            </tr>
            
<tr class="b">
              
<td>properties</td>
              
<td>Property[]</td>
              
<td>One of more Property elements to define the keys and values to be added to the ThreadContext Map.</td>
            </tr>
          </table>
          
<p>
            The following configuration shows a RewriteAppender configured to add a product key and its value
            to the MapMessage.:
          </p>

            
<div>
<pre class="prettyprint linenums">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;Configuration status=&quot;warn&quot; name=&quot;MyApp&quot; packages=&quot;&quot;&gt;
  &lt;Appenders&gt;
    &lt;Console name=&quot;STDOUT&quot; target=&quot;SYSTEM_OUT&quot;&gt;
      &lt;PatternLayout pattern=&quot;%m%n&quot;/&gt;
    &lt;/Console&gt;
    &lt;Rewrite name=&quot;rewrite&quot;&gt;
      &lt;AppenderRef ref=&quot;STDOUT&quot;/&gt;
      &lt;PropertiesRewritePolicy&gt;
        &lt;Property name=&quot;user&quot;&gt;${sys:user.name}&lt;/Property&gt;
        &lt;Property name=&quot;env&quot;&gt;${sys:environment}&lt;/Property&gt;
      &lt;/PropertiesRewritePolicy&gt;
    &lt;/Rewrite&gt;
  &lt;/Appenders&gt;
  &lt;Loggers&gt;
    &lt;Root level=&quot;error&quot;&gt;
      &lt;AppenderRef ref=&quot;Rewrite&quot;/&gt;
    &lt;/Root&gt;
  &lt;/Loggers&gt;
&lt;/Configuration&gt;</pre></div>
        </div></div></div>
        <a name="RollingFileAppender"></a>
        
<div class="section">
<h3><a name="RollingFileAppender"></a>RollingFileAppender</h3>
          
<p>The RollingFileAppender is an OutputStreamAppender that writes to the File named in the fileName parameter
            and rolls the file over according the TriggeringPolicy and the RolloverPolicy. The
            RollingFileAppender uses a RollingFileManager (which extends OutputStreamManager) to actually perform the
            file I/O and perform the rollover. While RolloverFileAppenders from different Configurations cannot be
            shared, the RollingFileManagers can be if the Manager is accessible. For example, two web applications in a
            servlet container can have their own configuration and safely
            write to the same file if Log4j is in a ClassLoader that is common to both of them.</p>
          
<p>
            A RollingFileAppender requires a <a href="#TriggeringPolicies">TriggeringPolicy</a> and a
            <a href="#RolloverStrategies">RolloverStrategy</a>. The triggering policy determines if a rollover should
            be performed while the RolloverStrategy defines how the rollover should be done. If no RolloverStrategy
            is configured, RollingFileAppender will use the <a href="#DefaultRolloverStrategy">DefaultRolloverStrategy</a>.
          </p>
          
<p>
            File locking is not supported by the RollingFileAppender.
          </p>
          
<table border="0" class="bodyTable"><caption align="top">RollingFileAppender Parameters</caption>
            
            
<tr class="a">
              
<th>Parameter Name</th>
              
<th>Type</th>
              
<th>Description</th>
            </tr>
            
<tr class="b">
              
<td>append</td>
              
<td>boolean</td>
              
<td>When true - the default, records will be appended to the end of the file. When set to false,
                the file will be cleared before new records are written.</td>
            </tr>
            
<tr class="a">
              
<td>bufferedIO</td>
              
<td>boolean</td>
              
<td>When true - the default, records will be written to a buffer and the data will be written to
                disk when the buffer is full or, if immediateFlush is set, when the record is written.
                File locking cannot be used with bufferedIO. Performance tests have shown that using buffered I/O
                significantly improves performance, even if immediateFlush is enabled.</td>
            </tr>
            
<tr class="b">
              
<td>bufferSize</td>
              
<td>int</td>
              
<td>When bufferedIO is true, this is the buffer size, the default is 8192 bytes.</td>
            </tr>
            
<tr class="a">
              
<td>filter</td>
              
<td>Filter</td>
              
<td>A Filter to determine if the event should be handled by this Appender. More than one Filter
              may be used by using a CompositeFilter.</td>
            </tr>
            
<tr class="b">
              
<td>fileName</td>
              
<td>String</td>
              
<td>The name of the file to write to. If the file, or any of its parent directories, do not exist,
                they will be created.</td>
            </tr>
            
<tr class="a">
              
<td>filePattern</td>
              
<td>String</td>
              
<td>The pattern of the file name of the archived log file. The format of the pattern should is
                dependent on the RolloverPolicy that is used. The DefaultRolloverPolicy will accept both
                a date/time pattern compatible with
                <a class="externalLink" href="http://download.oracle.com/javase/6/docs/api/java/text/SimpleDateFormat.html">SimpleDateFormat</a>
                and and/or a %i which represents an integer counter. The pattern also supports interpolation at
                runtime so any of the Lookups (such as the <a href="./lookups.html#DateLookup">DateLookup</a> can
                be included in the pattern.</td>
            </tr>
            
<tr class="b">
              
<td>immediateFlush</td>
              
<td>boolean</td>
              
<td>
<p>When set to true - the default, each write will be followed by a flush.
                This will guarantee the data is written
                to disk but could impact performance.</p>
                
<p>Flushing after every write is only useful when using this
				appender with synchronous loggers. Asynchronous loggers and
				appenders will automatically flush at the end of a batch of events,
				even if immediateFlush is set to false. This also guarantees
				the data is written to disk but is more efficient.</p>
              </td>
            </tr>
            
<tr class="a">
              
<td>layout</td>
              
<td>Layout</td>
              
<td>The Layout to use to format the LogEvent</td>
            </tr>

            
<tr class="b">
              
<td>name</td>
              
<td>String</td>
              
<td>The name of the Appender.</td>
            </tr>
            
<tr class="a">
              
<td>policy</td>
              
<td>TriggeringPolicy</td>
              
<td>The policy to use to determine if a rollover should occur.</td>
            </tr>
            
<tr class="b">
              
<td>strategy</td>
              
<td>RolloverStrategy</td>
              
<td>The strategy to use to determine the name and location of the archive file.</td>
            </tr>
            
<tr class="a">
              
<td>ignoreExceptions</td>
              
<td>boolean</td>
              
<td>The default is <tt>true</tt>, causing exceptions encountered while appending events to be
                internally logged and then ignored. When set to <tt>false</tt> exceptions will be propagated to the
                caller, instead. You must set this to <tt>false</tt> when wrapping this Appender in a
                <a href="#FailoverAppender">FailoverAppender</a>.</td>
            </tr>
          </table>
          <a name="TriggeringPolicies"></a>
          
<div class="section">
<h4><a name="Triggering_Policies"></a>Triggering Policies</h4>
            
<div class="section">
<h5><a name="Composite_Triggering_Policy"></a>Composite Triggering Policy</h5>
              
<p>
                The <tt>CompositeTriggeringPolicy</tt> combines multiple triggering policies and returns true if
                any of the configured policies return true. The <tt>CompositeTriggeringPolicy</tt> is configured
                simply by wrapping other policies in a <tt>Policies</tt> element.
              </p>
              
<p>
                For example, the following XML fragment defines policies that rollover the log when the JVM starts,
                when the log size reaches twenty megabytes, and when the current date no longer matches the log&#x2019;s
                start date.
              </p>
            
<div>
<pre class="prettyprint linenums">&lt;Policies&gt;
  &lt;OnStartupTriggeringPolicy /&gt;
  &lt;SizeBasedTriggeringPolicy size=&quot;20 MB&quot; /&gt;
  &lt;TimeBasedTriggeringPolicy /&gt;
&lt;/Policies&gt;</pre></div>
            </div>
<div class="section">
<h5><a name="OnStartup_Triggering_Policy"></a>OnStartup Triggering Policy</h5>
              
<p>
                The <tt>OnStartupTriggeringPolicy</tt> policy takes no parameters and causes a rollover if the log
                file is older than the current JVM's start time.
              </p>
              
<p>
                <i>Google App Engine note:</i><br />
                When running in Google App Engine, the OnStartup policy causes a rollover if the log file is older
                than <i>the time when Log4J initialized</i>.
                (Google App Engine restricts access to certain classes so Log4J cannot determine JVM start time with
                <tt>java.lang.management.ManagementFactory.getRuntimeMXBean().getStartTime()</tt>
                and falls back to Log4J initialization time instead.)
              </p>
            </div>
<div class="section">
<h5><a name="SizeBased_Triggering_Policy"></a>SizeBased Triggering Policy</h5>
              
<p>
                The <tt>SizeBasedTriggeringPolicy</tt> causes a rollover once the file has reached the specified
                size. The size can be specified in bytes, with the suffix KB, MB or GB, for example <tt>20MB</tt>.
              </p>
            </div>
<div class="section">
<h5><a name="TimeBased_Triggering_Policy"></a>TimeBased Triggering Policy</h5>
              
<p>
                The <tt>TimeBasedTriggeringPolicy</tt> causes a rollover once the date/time pattern no longer
                applies to the active file. This policy accepts an <tt>increment</tt> attribute which indicates how
                frequently the rollover should occur based on the time pattern and a <tt>modulate</tt> boolean
                attribute.
              </p>
                
<table border="0" class="bodyTable"><caption align="top">TimeBasedTriggeringPolicy Parameters</caption>
                  
                  
<tr class="a">
                    
<th>Parameter Name</th>
                    
<th>Type</th>
                    
<th>Description</th>
                  </tr>
                  
<tr class="b">
                    
<td>interval</td>
                    
<td>integer</td>
                    
<td>How often a rollover should occur based on the most specific time unit in the date pattern.
                      For example, with a date pattern with hours as the most specific item and and increment of 4 rollovers
                      would occur every 4 hours.
                      The default value is 1.</td>
                  </tr>
                  
<tr class="a">
                    
<td>modulate</td>
                    
<td>boolean</td>
                    
<td>Indicates whether the interval should be adjusted to cause the next rollover to occur on
                      the interval boundary. For example, if the item is hours, the current hour is 3 am and the
                      interval is 4 then then the first rollover will occur at 4 am and then next ones will occur at
                      8 am, noon, 4pm, etc.</td>
                  </tr>
                </table>
          <a name="RolloverStrategies"></a>
          </div></div>
<div class="section">
<h4><a name="Rollover_Strategies"></a>Rollover Strategies</h4>
            <a name="DefaultRolloverStrategy"></a>
            
<div class="section">
<h5><a name="Default_Rollover_Strategy"></a>Default Rollover Strategy</h5>
              
<p>
                The default rollover strategy accepts both a date/time pattern and an integer from the filePattern
                attribute specified on the RollingFileAppender itself. If the date/time pattern
                is present it will be replaced with the current date and time values. If the pattern contains an integer
                it will be incremented on each rollover. If the pattern contains both a date/time and integer
                in the pattern the integer will be incremented until the result of the date/time pattern changes. If
                the file pattern ends with &quot;.gz&quot; or &quot;.zip&quot; the resulting archive will be compressed using the
                compression scheme that matches the suffix. The pattern may also contain lookup references that
                can be resolved at runtime such as is shown in the example below.
              </p>
              
<p>The default rollover strategy supports two variations for incrementing the counter. The first is
                the &quot;fixed window&quot; strategy. To illustrate how it works, suppose that the min attribute is set to 1,
                the max attribute is set to 3, the file name is &quot;foo.log&quot;, and the file name pattern is &quot;foo-%i.log&quot;.
              </p>

              
<table border="0" class="bodyTable">
                
<tr class="a">
                  
<th>Number of rollovers</th>
                  
<th>Active output target</th>
                  
<th>Archived log files</th>
                  
<th>Description</th>
                </tr>
                
<tr class="b">
                  
<td>0</td>
                  
<td>foo.log</td>
                  
<td>-</td>
                  
<td>All logging is going to the initial file.</td>
                </tr>
                
<tr class="a">
                  
<td>1</td>
                  
<td>foo.log</td>
                  
<td>foo-1.log</td>
                  
<td>During the first rollover foo.log is renamed to foo-1.log. A new foo.log file is created and
                  starts being written to.</td>
                </tr>
                
<tr class="b">
                  
<td>2</td>
                  
<td>foo.log</td>
                  
<td>foo-1.log, foo-2.log</td>
                  
<td>During the second rollover foo-1.log is renamed to foo-2.log and foo.log is renamed to
                    foo-1.log. A new foo.log file is created and starts being written to.</td>
                </tr>
                
<tr class="a">
                  
<td>3</td>
                  
<td>foo.log</td>
                  
<td>foo-1.log, foo-2.log, foo-3.log</td>
                  
<td>During the third rollover foo-2.log is renamed to foo-3.log, foo-1.log is renamed to foo-2.log and
                    foo.log is renamed to foo-1.log. A new foo.log file is created and starts being written to.</td>
                </tr>
                
<tr class="b">
                  
<td>4</td>
                  
<td>foo.log</td>
                  
<td>foo-1.log, foo-2.log, foo-3.log</td>
                  
<td>In the fourth and subsequent rollovers, foo-3.log is deleted, foo-2.log is renamed to foo-3.log,
                    foo-1.log is renamed to foo-2.log and foo.log is renamed to foo-1.log. A new foo.log file is
                    created and starts being written to.</td>
                </tr>
              </table>
              
<p>By way of contrast, when the the fileIndex attribute is set to &quot;max&quot; but all the other settings
                are the same the following actions will be performed.
              </p>
              
<table border="0" class="bodyTable">
                
<tr class="a">
                  
<th>Number of rollovers</th>
                  
<th>Active output target</th>
                  
<th>Archived log files</th>
                  
<th>Description</th>
                </tr>
                
<tr class="b">
                  
<td>0</td>
                  
<td>foo.log</td>
                  
<td>-</td>
                  
<td>All logging is going to the initial file.</td>
                </tr>
                
<tr class="a">
                  
<td>1</td>
                  
<td>foo.log</td>
                  
<td>foo-1.log</td>
                  
<td>During the first rollover foo.log is renamed to foo-1.log. A new foo.log file is created and
                    starts being written to.</td>
                </tr>
                
<tr class="b">
                  
<td>2</td>
                  
<td>foo.log</td>
                  
<td>foo-1.log, foo-2.log</td>
                  
<td>During the second rollover foo.log is renamed to foo-2.log. A new foo.log file is created
                    and starts being written to.</td>
                </tr>
                
<tr class="a">
                  
<td>3</td>
                  
<td>foo.log</td>
                  
<td>foo-1.log, foo-2.log, foo-3.log</td>
                  
<td>During the third rollover foo.log is renamed to foo-3.log. A new foo.log file is created and
                    starts being written to.</td>
                </tr>
                
<tr class="b">
                  
<td>4</td>
                  
<td>foo.log</td>
                  
<td>foo-1.log, foo-2.log, foo-3.log</td>
                  
<td>In the fourth and subsequent rollovers, foo-1.log is deleted, foo-2.log is renamed to foo-1.log,
                    foo-3.log is renamed to foo-2.log and foo.log is renamed to foo-3.log. A new foo.log file is
                    created and starts being written to.</td>
                </tr>
              </table>
              
<table border="0" class="bodyTable"><caption align="top">DefaultRolloverStrategy Parameters</caption>
                
                
<tr class="a">
                  
<th>Parameter Name</th>
                  
<th>Type</th>
                  
<th>Description</th>
                </tr>
                
<tr class="b">
                  
<td>fileIndex</td>
                  
<td>String</td>
                  
<td>If set to &quot;max&quot; (the default), files with a higher index will be newer than files with a
                    smaller index. If set to &quot;min&quot;, file renaming and the counter will follow the Fixed Window strategy
                    described above.</td>
                </tr>
                
<tr class="a">
                  
<td>min</td>
                  
<td>integer</td>
                  
<td>The minimum value of the counter. The default value is 1.</td>
                </tr>
                
<tr class="b">
                  
<td>max</td>
                  
<td>integer</td>
                  
<td>The maximum value of the counter. Once this values is reached older archives will be
                    deleted on subsequent rollovers.</td>
                </tr>
                
<tr class="a">
                  
<td>compressionLevel</td>
                  
<td>integer</td>
                  
<td>
                    Sets the compression level, 0-9, where 0 = none, 1 = best speed, through 9 = best compression.
                    Only implemented for ZIP files.
                  </td>
                </tr>
              </table>

          
<p>
            Below is a sample configuration that uses a RollingFileAppender with both the time and size based
            triggering policies, will create up to 7 archives on the same day (1-7) that are stored in a directory
            based on the current year and month, and will compress each
            archive using gzip:
          </p>

            
<div>
<pre class="prettyprint linenums">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;Configuration status=&quot;warn&quot; name=&quot;MyApp&quot; packages=&quot;&quot;&gt;
  &lt;Appenders&gt;
    &lt;RollingFile name=&quot;RollingFile&quot; fileName=&quot;logs/app.log&quot;
                 filePattern=&quot;logs/$${date:yyyy-MM}/app-%d{MM-dd-yyyy}-%i.log.gz&quot;&gt;
      &lt;PatternLayout&gt;
        &lt;Pattern&gt;%d %p %c{1.} [%t] %m%n&lt;/Pattern&gt;
      &lt;/PatternLayout&gt;
      &lt;Policies&gt;
        &lt;TimeBasedTriggeringPolicy /&gt;
        &lt;SizeBasedTriggeringPolicy size=&quot;250 MB&quot;/&gt;
      &lt;/Policies&gt;
    &lt;/RollingFile&gt;
  &lt;/Appenders&gt;
  &lt;Loggers&gt;
    &lt;Root level=&quot;error&quot;&gt;
      &lt;AppenderRef ref=&quot;RollingFile&quot;/&gt;
    &lt;/Root&gt;
  &lt;/Loggers&gt;
&lt;/Configuration&gt;</pre></div>
          
<p>
            This second example shows a rollover strategy that will keep up to 20 files before removing them.
          </p>
          
<div>
<pre class="prettyprint linenums">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;Configuration status=&quot;warn&quot; name=&quot;MyApp&quot; packages=&quot;&quot;&gt;
  &lt;Appenders&gt;
    &lt;RollingFile name=&quot;RollingFile&quot; fileName=&quot;logs/app.log&quot;
                 filePattern=&quot;logs/$${date:yyyy-MM}/app-%d{MM-dd-yyyy}-%i.log.gz&quot;&gt;
      &lt;PatternLayout&gt;
        &lt;Pattern&gt;%d %p %c{1.} [%t] %m%n&lt;/Pattern&gt;
      &lt;/PatternLayout&gt;
      &lt;Policies&gt;
        &lt;TimeBasedTriggeringPolicy /&gt;
        &lt;SizeBasedTriggeringPolicy size=&quot;250 MB&quot;/&gt;
      &lt;/Policies&gt;
      &lt;DefaultRolloverStrategy max=&quot;20&quot;/&gt;
    &lt;/RollingFile&gt;
  &lt;/Appenders&gt;
  &lt;Loggers&gt;
    &lt;Root level=&quot;error&quot;&gt;
      &lt;AppenderRef ref=&quot;RollingFile&quot;/&gt;
    &lt;/Root&gt;
  &lt;/Loggers&gt;
&lt;/Configuration&gt;</pre></div>
          
<p>
            Below is a sample configuration that uses a RollingFileAppender with both the time and size based
            triggering policies, will create up to 7 archives on the same day (1-7) that are stored in a directory
            based on the current year and month, and will compress each
            archive using gzip and will roll every 6 hours when the hour is divisible by 6:
          </p>

            
<div>
<pre class="prettyprint linenums">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;Configuration status=&quot;warn&quot; name=&quot;MyApp&quot; packages=&quot;&quot;&gt;
  &lt;Appenders&gt;
    &lt;RollingFile name=&quot;RollingFile&quot; fileName=&quot;logs/app.log&quot;
                 filePattern=&quot;logs/$${date:yyyy-MM}/app-%d{yyyy-MM-dd-HH}-%i.log.gz&quot;&gt;
      &lt;PatternLayout&gt;
        &lt;Pattern&gt;%d %p %c{1.} [%t] %m%n&lt;/Pattern&gt;
      &lt;/PatternLayout&gt;
      &lt;Policies&gt;
        &lt;TimeBasedTriggeringPolicy interval=&quot;6&quot; modulate=&quot;true&quot;/&gt;
        &lt;SizeBasedTriggeringPolicy size=&quot;250 MB&quot;/&gt;
      &lt;/Policies&gt;
    &lt;/RollingFile&gt;
  &lt;/Appenders&gt;
  &lt;Loggers&gt;
    &lt;Root level=&quot;error&quot;&gt;
      &lt;AppenderRef ref=&quot;RollingFile&quot;/&gt;
    &lt;/Root&gt;
  &lt;/Loggers&gt;
&lt;/Configuration&gt;</pre></div>
        </div></div></div>
			<a name="RollingRandomAccessFileAppender"></a>
			
<div class="section">
<h3><a name="RollingRandomAccessFileAppender"></a>RollingRandomAccessFileAppender</h3>
			
<p><i>As of beta-9, the name of this appender has been changed from FastRollingFile to
			  RollingRandomAccessFile. Configurations using the <tt>FastRollingFile</tt> element
			  no longer work and should be modified to use the <tt>RollingRandomAccessFile</tt> element.</i></p>
				
<p>
					The RollingRandomAccessFileAppender is similar to the standard
					<a href="#RollingFileAppender">RollingFileAppender</a>
					except it is always buffered (this cannot be switched off)
					and
					internally it uses a
					<tt>ByteBuffer + RandomAccessFile</tt>
					instead of a
					<tt>BufferedOutputStream</tt>.
					We saw a 20-200% performance improvement compared to
					RollingFileAppender with &quot;bufferedIO=true&quot;
					in our
					<a href="async.html#RandomAccessFileAppenderPerformance">measurements</a>.

					The RollingRandomAccessFileAppender writes
					to the File named in the
					fileName parameter
					and rolls the file over according the
					TriggeringPolicy
					and the RolloverPolicy.

					Similar to the RollingFileAppender,
					RollingRandomAccessFileAppender uses a RollingRandomAccessFileManager
					to actually perform the
					file I/O and perform the rollover. While RollingRandomAccessFileAppender
					from different Configurations cannot be
					shared, the RollingRandomAccessFileManagers can be
					if the Manager is accessible.
					For example, two web applications in a servlet
					container can have their own configuration and safely write to the
					same file if Log4j is in a ClassLoader that is common to both of them.
				</p>
				
<p>
					A RollingRandomAccessFileAppender requires a
					<a href="#TriggeringPolicies">TriggeringPolicy</a>
					and a
					<a href="#RolloverStrategies">RolloverStrategy</a>.
					The triggering policy determines if a rollover should
					be performed
					while the RolloverStrategy defines how the rollover
					should be done.
					If no RolloverStrategy
					is configured, RollingRandomAccessFileAppender will
					use the
					<a href="#DefaultRolloverStrategy">DefaultRolloverStrategy</a>.
				</p>
				
<p>
					File locking is not supported by the RollingRandomAccessFileAppender.
				</p>
				
<table border="0" class="bodyTable"><caption align="top">RollingRandomAccessFileAppender Parameters</caption>
          
          
<tr class="a">
						
<th>Parameter Name</th>
						
<th>Type</th>
						
<th>Description</th>
					</tr>
          
<tr class="b">
						
<td>append</td>
						
<td>boolean</td>
						
<td>When true - the default, records will be appended to the end
							of the file. When set to false,
							the file will be cleared before
							new records are written.
						</td>
					</tr>
          
<tr class="a">
						
<td>filter</td>
						
<td>Filter</td>
						
<td>A Filter to determine if the event should be handled by this
							Appender. More than one Filter
							may be used by using a
							CompositeFilter.
						</td>
					</tr>
          
<tr class="b">
						
<td>fileName</td>
						
<td>String</td>
						
<td>The name of the file to write to. If the file, or any of its
							parent directories, do not exist,
							they will be created.
						</td>
					</tr>
          
<tr class="a">
						
<td>filePattern</td>
						
<td>String</td>
						
<td>
							The pattern of the file name of the archived log file. The format
							of the pattern should is
							dependent on the RolloverPolicy that is
							used. The DefaultRolloverPolicy
							will accept both
							a date/time
							pattern compatible with
							<a class="externalLink" href="http://download.oracle.com/javase/6/docs/api/java/text/SimpleDateFormat.html">
								SimpleDateFormat</a>

							and/or a %i which represents an integer counter. The pattern
							also supports interpolation at
							runtime so any of the Lookups (such
							as the
							<a href="./lookups.html#DateLookup">DateLookup</a>
							can
							be included in the pattern.
						</td>
					</tr>
          
<tr class="b">
						
<td>immediateFlush</td>
						
<td>boolean</td>
		              
<td>
<p>When set to true - the default, each write will be followed by a flush.
		                This will guarantee the data is written
		                to disk but could impact performance.</p>
		                
<p>Flushing after every write is only useful when using this
						appender with synchronous loggers. Asynchronous loggers and
						appenders will automatically flush at the end of a batch of events,
						even if immediateFlush is set to false. This also guarantees
						the data is written to disk but is more efficient.</p>
		              </td>
					</tr>
          
<tr class="a">
                      
<td>bufferSize</td>
                      
<td>int</td>
                      
<td>The buffer size, defaults to 262,144 bytes (256 * 1024).</td>
                    </tr>
          
<tr class="b">
						
<td>layout</td>
						
<td>Layout</td>
						
<td>The Layout to use to format the LogEvent</td>
					</tr>

          
<tr class="a">
						
<td>name</td>
						
<td>String</td>
						
<td>The name of the Appender.</td>
					</tr>
          
<tr class="b">
						
<td>policy</td>
						
<td>TriggeringPolicy</td>
						
<td>The policy to use to determine if a rollover should occur.
						</td>
					</tr>
          
<tr class="a">
						
<td>strategy</td>
						
<td>RolloverStrategy</td>
						
<td>The strategy to use to determine the name and location of the
							archive file.
						</td>
					</tr>
          
<tr class="b">
            
<td>ignoreExceptions</td>
            
<td>boolean</td>
            
<td>The default is <tt>true</tt>, causing exceptions encountered while appending events to be
              internally logged and then ignored. When set to <tt>false</tt> exceptions will be propagated to the
              caller, instead. You must set this to <tt>false</tt> when wrapping this Appender in a
              <a href="#FailoverAppender">FailoverAppender</a>.</td>
          </tr>
				</table>
				<a name="FRFA_TriggeringPolicies"></a>
				
<div class="section">
<h4><a name="Triggering_Policies"></a>Triggering Policies</h4>
				
<p>
					See
					<a href="#TriggeringPolicies">RollingFileAppender Triggering Policies</a>.
				</p>
				<a name="FRFA_RolloverStrategies"></a>
				</div>
<div class="section">
<h4><a name="Rollover_Strategies"></a>Rollover Strategies</h4>
				
<p>
					See
					<a href="#RolloverStrategies">RollingFileAppender Rollover Strategies</a>.
				</p>

				
<p>
					Below is a sample configuration that uses a RollingRandomAccessFileAppender
					with both the time and size based
					triggering policies, will create
					up to 7 archives on the same day (1-7) that
					are stored in a
					directory
					based on the current year and month, and will compress
					each
					archive using gzip:
        </p>

					
<div>
<pre class="prettyprint linenums">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;Configuration status=&quot;warn&quot; name=&quot;MyApp&quot; packages=&quot;&quot;&gt;
  &lt;Appenders&gt;
    &lt;RollingRandomAccessFile name=&quot;RollingRandomAccessFile&quot; fileName=&quot;logs/app.log&quot;
                 filePattern=&quot;logs/$${date:yyyy-MM}/app-%d{MM-dd-yyyy}-%i.log.gz&quot;&gt;
      &lt;PatternLayout&gt;
        &lt;Pattern&gt;%d %p %c{1.} [%t] %m%n&lt;/Pattern&gt;
      &lt;/PatternLayout&gt;
      &lt;Policies&gt;
        &lt;TimeBasedTriggeringPolicy /&gt;
        &lt;SizeBasedTriggeringPolicy size=&quot;250 MB&quot;/&gt;
      &lt;/Policies&gt;
    &lt;/RollingRandomAccessFile&gt;
  &lt;/Appenders&gt;
  &lt;Loggers&gt;
    &lt;Root level=&quot;error&quot;&gt;
      &lt;AppenderRef ref=&quot;RollingRandomAccessFile&quot;/&gt;
    &lt;/Root&gt;
  &lt;/Loggers&gt;
&lt;/Configuration&gt;</pre></div>
				
<p>
					This second example shows a rollover strategy that will keep up to
					20 files before removing them.
        </p>
					
<div>
<pre class="prettyprint linenums">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;Configuration status=&quot;warn&quot; name=&quot;MyApp&quot; packages=&quot;&quot;&gt;
  &lt;Appenders&gt;
    &lt;RollingRandomAccessFile name=&quot;RollingRandomAccessFile&quot; fileName=&quot;logs/app.log&quot;
                 filePattern=&quot;logs/$${date:yyyy-MM}/app-%d{MM-dd-yyyy}-%i.log.gz&quot;&gt;
      &lt;PatternLayout&gt;
        &lt;Pattern&gt;%d %p %c{1.} [%t] %m%n&lt;/Pattern&gt;
      &lt;/PatternLayout&gt;
      &lt;Policies&gt;
        &lt;TimeBasedTriggeringPolicy /&gt;
        &lt;SizeBasedTriggeringPolicy size=&quot;250 MB&quot;/&gt;
      &lt;/Policies&gt;
      &lt;DefaultRolloverStrategy max=&quot;20&quot;/&gt;
    &lt;/RollingRandomAccessFile&gt;
  &lt;/Appenders&gt;
  &lt;Loggers&gt;
    &lt;Root level=&quot;error&quot;&gt;
      &lt;AppenderRef ref=&quot;RollingRandomAccessFile&quot;/&gt;
    &lt;/Root&gt;
  &lt;/Loggers&gt;
&lt;/Configuration&gt;</pre></div>
				
<p>
					Below is a sample configuration that uses a RollingRandomAccessFileAppender
					with both the time and size based
					triggering policies, will create
					up to 7 archives on the same day (1-7) that
					are stored in a
					directory
					based on the current year and month, and will compress
					each
					archive using gzip and will roll every 6 hours when the hour is
					divisible
					by 6:
        </p>

					
<div>
<pre class="prettyprint linenums">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;Configuration status=&quot;warn&quot; name=&quot;MyApp&quot; packages=&quot;&quot;&gt;
  &lt;Appenders&gt;
    &lt;RollingRandomAccessFile name=&quot;RollingRandomAccessFile&quot; fileName=&quot;logs/app.log&quot;
                 filePattern=&quot;logs/$${date:yyyy-MM}/app-%d{yyyy-MM-dd-HH}-%i.log.gz&quot;&gt;
      &lt;PatternLayout&gt;
        &lt;Pattern&gt;%d %p %c{1.} [%t] %m%n&lt;/Pattern&gt;
      &lt;/PatternLayout&gt;
      &lt;Policies&gt;
        &lt;TimeBasedTriggeringPolicy interval=&quot;6&quot; modulate=&quot;true&quot;/&gt;
        &lt;SizeBasedTriggeringPolicy size=&quot;250 MB&quot;/&gt;
      &lt;/Policies&gt;
    &lt;/RollingRandomAccessFile&gt;
  &lt;/Appenders&gt;
  &lt;Loggers&gt;
    &lt;Root level=&quot;error&quot;&gt;
      &lt;AppenderRef ref=&quot;RollingRandomAccessFile&quot;/&gt;
    &lt;/Root&gt;
  &lt;/Loggers&gt;
&lt;/Configuration&gt;</pre></div>
			</div></div>
        <a name="RoutingAppender"></a>
        
<div class="section">
<h3><a name="RoutingAppender"></a>RoutingAppender</h3>
           
<p>
             The RoutingAppender evaluates LogEvents and then routes them to a subordinate Appender. The target
             Appender may be an appender previously configured and may be referenced by its name or the
             Appender can be dynamically created as needed. The RoutingAppender should be configured after any
             Appenders it references to allow it to shut down properly.
          </p>
          
<table border="0" class="bodyTable"><caption align="top">RoutingAppender Parameters</caption>
            
            
<tr class="a">
              
<th>Parameter Name</th>
              
<th>Type</th>
              
<th>Description</th>
            </tr>
            
<tr class="b">
              
<td>filter</td>
              
<td>Filter</td>
              
<td>A Filter to determine if the event should be handled by this Appender. More than one Filter
              may be used by using a CompositeFilter.</td>
            </tr>
            
<tr class="a">
              
<td>name</td>
              
<td>String</td>
              
<td>The name of the Appender.</td>
            </tr>
            
<tr class="b">
              
<td>rewritePolicy</td>
              
<td>RewritePolicy</td>
              
<td>The RewritePolicy that will manipulate the LogEvent.</td>
            </tr>
            
<tr class="a">
              
<td>routes</td>
              
<td>Routes</td>
              
<td>Contains one or more Route declarations to identify the criteria for choosing Appenders.</td>
            </tr>
            
<tr class="b">
              
<td>ignoreExceptions</td>
              
<td>boolean</td>
              
<td>The default is <tt>true</tt>, causing exceptions encountered while appending events to be
                internally logged and then ignored. When set to <tt>false</tt> exceptions will be propagated to the
                caller, instead. You must set this to <tt>false</tt> when wrapping this Appender in a
                <a href="#FailoverAppender">FailoverAppender</a>.</td>
            </tr>
          </table>
          
<div class="section">
<h4><a name="Routes"></a>Routes</h4>
            
<p>
              The Routes element accepts a single, required attribute named &quot;pattern&quot;. The pattern is evaluated
              against all the registered Lookups and the result is used to select a Route. Each Route may be
              configured with a key. If the key matches the result of evaluating the pattern then that Route
              will be selected. If no key is specified on a Route then that Route is the default. Only one Route
              can be configured as the default.
            </p>
            
<p>
              Each Route must reference an Appender. If the Route contains a ref attribute then the
              Route will reference an Appender that was defined in the configuration. If the Route contains an
              Appender definition then an Appender will be created within the context of the RoutingAppender and
              will be reused each time a matching Appender name is referenced through a Route.
            </p>
          
<p>
            Below is a sample configuration that uses a RoutingAppender to route all Audit events to
            a FlumeAppender and all other events will be routed to a RollingFileAppender that captures only
            the specific event type. Note that the AuditAppender was predefined while the RollingFileAppenders
            are created as needed.
          </p>

            
<div>
<pre class="prettyprint linenums">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;Configuration status=&quot;warn&quot; name=&quot;MyApp&quot; packages=&quot;&quot;&gt;
  &lt;Appenders&gt;
    &lt;Flume name=&quot;AuditLogger&quot; compress=&quot;true&quot;&gt;
      &lt;Agent host=&quot;192.168.10.101&quot; port=&quot;8800&quot;/&gt;
      &lt;Agent host=&quot;192.168.10.102&quot; port=&quot;8800&quot;/&gt;
      &lt;RFC5424Layout enterpriseNumber=&quot;18060&quot; includeMDC=&quot;true&quot; appName=&quot;MyApp&quot;/&gt;
    &lt;/Flume&gt;
    &lt;Routing name=&quot;Routing&quot;&gt;
      &lt;Routes pattern=&quot;$${sd:type}&quot;&gt;
        &lt;Route&gt;
          &lt;RollingFile name=&quot;Rolling-${sd:type}&quot; fileName=&quot;${sd:type}.log&quot;
                       filePattern=&quot;${sd:type}.%i.log.gz&quot;&gt;
            &lt;PatternLayout&gt;
              &lt;pattern&gt;%d %p %c{1.} [%t] %m%n&lt;/pattern&gt;
            &lt;/PatternLayout&gt;
            &lt;SizeBasedTriggeringPolicy size=&quot;500&quot; /&gt;
          &lt;/RollingFile&gt;
        &lt;/Route&gt;
        &lt;Route ref=&quot;AuditLogger&quot; key=&quot;Audit&quot;/&gt;
      &lt;/Routes&gt;
    &lt;/Routing&gt;
  &lt;/Appenders&gt;
  &lt;Loggers&gt;
    &lt;Root level=&quot;error&quot;&gt;
      &lt;AppenderRef ref=&quot;Routing&quot;/&gt;
    &lt;/Root&gt;
  &lt;/Loggers&gt;
&lt;/Configuration&gt;</pre></div>
        </div></div>
        <a name="SMTPAppender"></a>
        
<div class="section">
<h3><a name="SMTPAppender"></a>SMTPAppender</h3>
          
<p>
            Sends an e-mail when a specific logging event occurs, typically on errors or fatal errors.
          </p>
          
<p>
            The number of logging events delivered in this e-mail depend on the value of
            <b>BufferSize</b> option. The <tt>SMTPAppender</tt> keeps only the last
            <tt>BufferSize</tt> logging events in its cyclic buffer. This keeps
            memory requirements at a reasonable level while still delivering useful
            application context. All events in the buffer are included in the email.
            The buffer will contain the most recent events of level TRACE to WARN
            preceding the event that triggered the email.
          </p>
          
<p>
            The default behavior is to trigger sending an email whenever an ERROR or higher
            severity event is logged and to format it as HTML. The circumstances on when the
            email is sent can be controlled by setting one or more filters on the Appender.
            As with other Appenders, the formatting can be controlled by specifying a Layout
            for the Appender.
          </p>
          
<table border="0" class="bodyTable"><caption align="top">SMTPAppender Parameters</caption>
            
            
<tr class="a">
              
<th>Parameter Name</th>
              
<th>Type</th>
              
<th>Description</th>
            </tr>
            
<tr class="b">
              
<td>bcc</td>
              
<td>String</td>
              
<td>The comma-separated list of BCC email addresses.</td>
            </tr>
            
<tr class="a">
              
<td>cc</td>
              
<td>String</td>
              
<td>The comma-separated list of CC email addresses.</td>
            </tr>
            
<tr class="b">
              
<td>bufferSize</td>
              
<td>integer</td>
              
<td>The maximum number of log events to be buffered for inclusion in the message. Defaults to 512.</td>
            </tr>
            
<tr class="a">
              
<td>filter</td>
              
<td>Filter</td>
              
<td>A Filter to determine if the event should be handled by this Appender. More than one Filter
                may be used by using a CompositeFilter.
              </td>
            </tr>
            
<tr class="b">
              
<td>from</td>
              
<td>String</td>
              
<td>The email address of the sender.</td>
            </tr>
            
<tr class="a">
              
<td>layout</td>
              
<td>Layout</td>
              
<td>The Layout to use to format the LogEvent. The default is SerializedLayout.</td>
            </tr>
            
<tr class="b">
              
<td>name</td>
              
<td>String</td>
              
<td>The name of the Appender.</td>
            </tr>
            
<tr class="a">
              
<td>replyTo</td>
              
<td>String</td>
              
<td>The comma-separated list of reply-to email addresses.</td>
            </tr>
            
<tr class="b">
              
<td>smtpDebug</td>
              
<td>boolean</td>
              
<td>When set to true enables session debugging on STDOUT. Defaults to false.</td>
            </tr>
            
<tr class="a">
              
<td>smtpHost</td>
              
<td>String</td>
              
<td>The SMTP hostname to send to. This parameter is required.</td>
            </tr>
            
<tr class="b">
              
<td>smtpPassword</td>
              
<td>String</td>
              
<td>The password required to authenticate against the SMTP server.</td>
            </tr>
            
<tr class="a">
              
<td>smtpPort</td>
              
<td>integer</td>
              
<td>The SMTP port to send to. </td>
            </tr>
            
<tr class="b">
              
<td>smtpProtocol</td>
              
<td>String</td>
              
<td>The SMTP transport protocol (such as &quot;smtps&quot;, defaults to &quot;smtp&quot;).</td>
            </tr>
            
<tr class="a">
              
<td>smtpUsername</td>
              
<td>String</td>
              
<td>The username required to authenticate against the SMTP server.</td>
            </tr>
            
<tr class="b">
              
<td>ignoreExceptions</td>
              
<td>boolean</td>
              
<td>The default is <tt>true</tt>, causing exceptions encountered while appending events to be
                internally logged and then ignored. When set to <tt>false</tt> exceptions will be propagated to the
                caller, instead. You must set this to <tt>false</tt> when wrapping this Appender in a
                <a href="#FailoverAppender">FailoverAppender</a>.</td>
            </tr>
            
<tr class="a">
              
<td>to</td>
              
<td>String</td>
              
<td>The comma-separated list of recipient email addresses.</td>
            </tr>
          </table>
          
<div>
<pre class="prettyprint linenums">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;Configuration status=&quot;warn&quot; name=&quot;MyApp&quot; packages=&quot;&quot;&gt;
  &lt;Appenders&gt;
    &lt;SMTP name=&quot;Mail&quot; subject=&quot;Error Log&quot; to=&quot;errors@logging.apache.org&quot; from=&quot;test@logging.apache.org&quot;
          smtpHost=&quot;localhost&quot; smtpPort=&quot;25&quot; bufferSize=&quot;50&quot;&gt;
    &lt;/SMTP&gt;
  &lt;/Appenders&gt;
  &lt;Loggers&gt;
    &lt;Root level=&quot;error&quot;&gt;
      &lt;AppenderRef ref=&quot;Mail&quot;/&gt;
    &lt;/Root&gt;
  &lt;/Loggers&gt;
&lt;/Configuration&gt;</pre></div>
        </div>
        <a name="SocketAppender"></a>
        
<div class="section">
<h3><a name="SocketAppender"></a>SocketAppender</h3>
          
<p>
            The <tt>SocketAppender</tt> is an OutputStreamAppender that writes its output to a remote destination
            specified by a host and port. The data can be sent over either TCP or UDP and can be sent in any format.
            The default format is to send a Serialized LogEvent. Log4j 2 contains a SocketServer which is capable
            of receiving serialized LogEvents and routing them through the logging system on the server. You can optionally
            secure communication with SSL.
          </p>
          
<table border="0" class="bodyTable"><caption align="top">
  <tt>SocketAppender</tt> Parameters</caption>
            
            
<tr class="a">
              
<th>Parameter Name</th>
              
<th>Type</th>
              
<th>Description</th>
            </tr>
            
<tr class="b">
              
<td>name</td>
              
<td>String</td>
              
<td>The name of the Appender.</td>
            </tr>
            
<tr class="a">
              
<td>host</td>
              
<td>String</td>
              
<td>The name or address of the system that is listening for log events. This parameter is required.</td>
            </tr>
            
<tr class="b">
              
<td>port</td>
              
<td>integer</td>
              
<td>The port on the host that is listening for log events. This parameter must be specified.</td>
            </tr>
            
<tr class="a">
              
<td>protocol</td>
              
<td>String</td>
              
<td>&quot;TCP&quot; (default), &quot;SSL&quot; or &quot;UDP&quot;.</td>
            </tr>
            
<tr class="b">
              
<td>SSL</td>
              
<td>SslConfiguration</td>
              
<td>Contains the configuration for the KeyStore and TrustStore.</td>
            </tr>
            
<tr class="a">
              
<td>filter</td>
              
<td>Filter</td>
              
<td>A Filter to determine if the event should be handled by this Appender. More than one Filter
              may be used by using a CompositeFilter.</td>
            </tr>
            
<tr class="b">
              
<td>immediateFail</td>
              
<td>boolean</td>
              
<td>When set to true, log events will not wait to try to reconnect and will fail immediately if the
              socket is not available.</td>
            </tr>
            
<tr class="a">
              
<td>immediateFlush</td>
              
<td>boolean</td>
              
<td>When set to true - the default, each write will be followed by a flush.
                This will guarantee the data is written
                to disk but could impact performance.</td>
            </tr>
            
<tr class="b">
              
<td>layout</td>
              
<td>Layout</td>
              
<td>The Layout to use to format the LogEvent. The default is SerializedLayout.</td>
            </tr>
            
<tr class="a">
              
<td>reconnectionDelayMillis</td>
              
<td>integer</td>
              
<td>If set to a value greater than 0, after an error the SocketManager will attempt to reconnect to
                the server after waiting the specified number of milliseconds. If the reconnect fails then
                an exception will be thrown (which can be caught by the application if <tt>ignoreExceptions</tt> is
                set to <tt>false</tt>).</td>
            </tr>
            
<tr class="b">
              
<td>connectTimeoutMillis</td>
              
<td>integer</td>
              
<td>The connect timeout in milliseconds. The default is 0 (infinite timeout, like Socket.connect()
                methods).</td>
            </tr>
            
<tr class="a">
              
<td>ignoreExceptions</td>
              
<td>boolean</td>
              
<td>The default is <tt>true</tt>, causing exceptions encountered while appending events to be
                internally logged and then ignored. When set to <tt>false</tt> exceptions will be propagated to the
                caller, instead. You must set this to <tt>false</tt> when wrapping this Appender in a
                <a href="#FailoverAppender">FailoverAppender</a>.</td>
            </tr>
          </table>

          
<p>
            This is an unsecured TCP configuration:
          </p>
          
<div>
<pre class="prettyprint linenums">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;Configuration status=&quot;warn&quot; name=&quot;MyApp&quot; packages=&quot;&quot;&gt;
  &lt;Appenders&gt;
    &lt;Socket name=&quot;socket&quot; host=&quot;localhost&quot; port=&quot;9500&quot;&gt;
      &lt;SerializedLayout /&gt;
    &lt;/Socket&gt;
  &lt;/Appenders&gt;
  &lt;Loggers&gt;
    &lt;Root level=&quot;error&quot;&gt;
      &lt;AppenderRef ref=&quot;socket&quot;/&gt;
    &lt;/Root&gt;
  &lt;/Loggers&gt;
&lt;/Configuration&gt;</pre></div>

          
<p>
            This is a secured SSL configuration:
          </p>
          
<div>
<pre class="prettyprint linenums">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;Configuration status=&quot;warn&quot; name=&quot;MyApp&quot; packages=&quot;&quot;&gt;
  &lt;Appenders&gt;
    &lt;Socket name=&quot;socket&quot; host=&quot;localhost&quot; port=&quot;9500&quot;&gt;
      &lt;SerializedLayout /&gt;
      &lt;SSL&gt;
        &lt;KeyStore location=&quot;log4j2-keystore.jks&quot; password=&quot;changeme&quot;/&gt;
        &lt;TrustStore location=&quot;truststore.jks&quot; password=&quot;changeme&quot;/&gt;
      &lt;/SSL&gt;
    &lt;/Socket&gt;
  &lt;/Appenders&gt;
  &lt;Loggers&gt;
    &lt;Root level=&quot;error&quot;&gt;
      &lt;AppenderRef ref=&quot;socket&quot;/&gt;
    &lt;/Root&gt;
  &lt;/Loggers&gt;
&lt;/Configuration&gt;</pre></div>

        </div>
        <a name="SyslogAppender"></a>
        
<div class="section">
<h3><a name="SyslogAppender"></a>SyslogAppender</h3>
          
<p>
            The <tt>SyslogAppender</tt> is a <tt>SocketAppender</tt> that writes its output to a remote destination
            specified by a host and port in a format that conforms with either the BSD Syslog format or the RFC 5424
            format. The data can be sent over either TCP or UDP.
          </p>
          
<table border="0" class="bodyTable"><caption align="top">
  <tt>SyslogAppender</tt> Parameters</caption>
            
            
<tr class="a">
              
<th>Parameter Name</th>
              
<th>Type</th>
              
<th>Description</th>
            </tr>
            
<tr class="b">
              
<td>advertise</td>
              
<td>boolean</td>
              
<td>Indicates whether the appender should be advertised.</td>
            </tr>
            
<tr class="a">
              
<td>appName</td>
              
<td>String</td>
              
<td>The value to use as the APP-NAME in the RFC 5424 syslog record.</td>
            </tr>
            
<tr class="b">
              
<td>charset</td>
              
<td>String</td>
              
<td>The character set to use when converting the syslog String to a byte array. The String must be
                a valid <a class="externalLink" href="http://download.oracle.com/javase/6/docs/api/java/nio/charset/Charset.html">Charset</a>.
                If not specified, the default system Charset will be used.</td>
            </tr>
            
<tr class="a">
              
<td>connectTimeoutMillis</td>
              
<td>integer</td>
              
<td>The connect timeout in milliseconds. The default is 0 (infinite timeout, like Socket.connect()
                methods).</td>
            </tr>
            
<tr class="b">
              
<td>enterpriseNumber</td>
              
<td>integer</td>
              
<td>The IANA enterprise number as described in
                <a class="externalLink" href="http://tools.ietf.org/html/rfc5424#section-7.2.2">RFC 5424</a></td>
            </tr>
            
<tr class="a">
              
<td>filter</td>
              
<td>Filter</td>
              
<td>A Filter to determine if the event should be handled by this Appender. More than one Filter
              may be used by using a CompositeFilter.</td>
            </tr>
            
<tr class="b">
              
<td>facility</td>
              
<td>String</td>
              
<td>The facility is used to try to classify the message. The facility option must be set to one of
                &quot;KERN&quot;, &quot;USER&quot;, &quot;MAIL&quot;, &quot;DAEMON&quot;, &quot;AUTH&quot;, &quot;SYSLOG&quot;, &quot;LPR&quot;, &quot;NEWS&quot;, &quot;UUCP&quot;, &quot;CRON&quot;, &quot;AUTHPRIV&quot;,
                &quot;FTP&quot;, &quot;NTP&quot;, &quot;AUDIT&quot;, &quot;ALERT&quot;, &quot;CLOCK&quot;, &quot;LOCAL0&quot;, &quot;LOCAL1&quot;, &quot;LOCAL2&quot;, &quot;LOCAL3&quot;, &quot;LOCAL4&quot;, &quot;LOCAL5&quot;,
                &quot;LOCAL6&quot;, or &quot;LOCAL7&quot;. These values may be specified as upper or lower case characters.</td>
            </tr>
            
<tr class="a">
              
<td>format</td>
              
<td>String</td>
              
<td>If set to &quot;RFC5424&quot; the data will be formatted in accordance with RFC 5424. Otherwise, it will
                be formatted as a BSD Syslog record. Note that although BSD Syslog records are required to be
                1024 bytes or shorter the SyslogLayout does not truncate them. The RFC5424Layout also does not
                truncate records since the receiver must accept records of up to 2048 bytes and may accept records
                that are longer.</td>
            </tr>
            
<tr class="b">
              
<td>host</td>
              
<td>String</td>
              
<td>The name or address of the system that is listening for log events. This parameter is required.</td>
            </tr>
            
<tr class="a">
              
<td>id</td>
              
<td>String</td>
              
<td>The default structured data id to use when formatting according to RFC 5424. If the LogEvent contains
                a StructuredDataMessage the id from the Message will be used instead of this value.</td>
            </tr>
            
<tr class="b">
              
<td>ignoreExceptions</td>
              
<td>boolean</td>
              
<td>The default is <tt>true</tt>, causing exceptions encountered while appending events to be
                internally logged and then ignored. When set to <tt>false</tt> exceptions will be propagated to the
                caller, instead. You must set this to <tt>false</tt> when wrapping this Appender in a
                <a href="#FailoverAppender">FailoverAppender</a>.</td>
            </tr>
            
<tr class="a">
              
<td>immediateFail</td>
              
<td>boolean</td>
              
<td>When set to true, log events will not wait to try to reconnect and will fail immediately if the
                socket is not available.</td>
            </tr>
            
<tr class="b">
              
<td>immediateFlush</td>
              
<td>boolean</td>
              
<td>When set to true - the default, each write will be followed by a flush.
                This will guarantee the data is written
                to disk but could impact performance.</td>
            </tr>
            
<tr class="a">
              
<td>includeMDC</td>
              
<td>boolean</td>
              
<td>Indicates whether data from the ThreadContextMap will be included in the RFC 5424 Syslog record.
                Defaults to true.</td>
            </tr>
            
<tr class="b">
              
<td>loggerFields</td>
              
<td>List of KeyValuePairs</td>
              
<td>Allows arbitrary PatternLayout patterns to be included as specified ThreadContext fields; no default
                specified. To use, include a &gt;LoggerFields&lt; nested element, containing one or more
                &gt;KeyValuePair&lt; elements. Each &gt;KeyValuePair&lt; must have a key attribute, which
                specifies the key name which will be used to identify the field within the MDC Structured Data element,
                and a value attribute, which specifies the PatternLayout pattern to use as the value.</td>
            </tr>
            
<tr class="a">
              
<td>mdcExcludes</td>
              
<td>String</td>
              
<td>A comma separated list of mdc keys that should be excluded from the LogEvent. This is mutually
                exclusive with the mdcIncludes attribute. This attribute only applies to RFC 5424 syslog records.</td>
            </tr>
            
<tr class="b">
              
<td>mdcIncludes</td>
              
<td>String</td>
              
<td>A comma separated list of mdc keys that should be included in the FlumeEvent. Any keys in the MDC
                not found in the list will be excluded. This option is mutually exclusive with the mdcExcludes
                attribute. This attribute only applies to RFC 5424 syslog records.</td>
            </tr>
            
<tr class="a">
              
<td>mdcRequired</td>
              
<td>String</td>
              
<td>A comma separated list of mdc keys that must be present in the MDC. If a key is not present a
                LoggingException will be thrown. This attribute only applies to RFC 5424 syslog records.</td>
            </tr>
            
<tr class="b">
              
<td>mdcPrefix</td>
              
<td>String</td>
              
<td>A string that should be prepended to each MDC key in order to distinguish it from event attributes.
                The default string is &quot;mdc:&quot;. This attribute only applies to RFC 5424 syslog records.</td>
            </tr>
            
<tr class="a">
              
<td>messageId</td>
              
<td>String</td>
              
<td>The default value to be used in the MSGID field of RFC 5424 syslog records. </td>
            </tr>
            
<tr class="b">
              
<td>name</td>
              
<td>String</td>
              
<td>The name of the Appender.</td>
            </tr>
            
<tr class="a">
              
<td>newLine</td>
              
<td>boolean</td>
              
<td>If true, a newline will be appended to the end of the syslog record. The default is false.</td>
            </tr>
            
<tr class="b">
              
<td>port</td>
              
<td>integer</td>
              
<td>The port on the host that is listening for log events. This parameter must be specified.</td>
            </tr>
            
<tr class="a">
              
<td>protocol</td>
              
<td>String</td>
              
<td>&quot;TCP&quot; or &quot;UDP&quot;. This parameter is required.</td>
            </tr>
            
<tr class="b">
              
<td>SSL</td>
              
<td>SslConfiguration</td>
              
<td>Contains the configuration for the KeyStore and TrustStore.</td>
            </tr>
            
<tr class="a">
              
<td>reconnectionDelayMillis</td>
              
<td>integer</td>
              
<td>If set to a value greater than 0, after an error the SocketManager will attempt to reconnect to
                the server after waiting the specified number of milliseconds. If the reconnect fails then
                an exception will be thrown (which can be caught by the application if <tt>ignoreExceptions</tt> is
                set to <tt>false</tt>).</td>
            </tr>
          </table>
          
<p>
            A sample syslogAppender configuration that is configured with two <tt>SyslogAppender</tt>s, one using the BSD
            format and one using RFC 5424.
          </p>

            
<div>
<pre class="prettyprint linenums">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;Configuration status=&quot;warn&quot; name=&quot;MyApp&quot; packages=&quot;&quot;&gt;
  &lt;Appenders&gt;
    &lt;Syslog name=&quot;bsd&quot; host=&quot;localhost&quot; port=&quot;514&quot; protocol=&quot;TCP&quot;/&gt;
    &lt;Syslog name=&quot;RFC5424&quot; format=&quot;RFC5424&quot; host=&quot;localhost&quot; port=&quot;8514&quot;
            protocol=&quot;TCP&quot; appName=&quot;MyApp&quot; includeMDC=&quot;true&quot;
            facility=&quot;LOCAL0&quot; enterpriseNumber=&quot;18060&quot; newLine=&quot;true&quot;
            messageId=&quot;Audit&quot; id=&quot;App&quot;/&gt;
  &lt;/Appenders&gt;
  &lt;Loggers&gt;
    &lt;Logger name=&quot;com.mycorp&quot; level=&quot;error&quot;&gt;
      &lt;AppenderRef ref=&quot;RFC5424&quot;/&gt;
    &lt;/Logger&gt;
    &lt;Root level=&quot;error&quot;&gt;
      &lt;AppenderRef ref=&quot;bsd&quot;/&gt;
    &lt;/Root&gt;
  &lt;/Loggers&gt;
&lt;/Configuration&gt;</pre></div>

          
<p>
            For SSL this appender writes its output to a remote destination specified by a host and port over SSL in
            a format that conforms with either the BSD Syslog format or the RFC 5424 format.
          </p>

            
<div>
<pre class="prettyprint linenums">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;Configuration status=&quot;warn&quot; name=&quot;MyApp&quot; packages=&quot;&quot;&gt;
  &lt;Appenders&gt;
    &lt;TLSSyslog name=&quot;bsd&quot; host=&quot;localhost&quot; port=&quot;6514&quot;&gt;
      &lt;SSL&gt;
        &lt;KeyStore location=&quot;log4j2-keystore.jks&quot; password=&quot;changeme&quot;/&gt;
        &lt;TrustStore location=&quot;truststore.jks&quot; password=&quot;changeme&quot;/&gt;
      &lt;/SSL&gt;
    &lt;/TLSSyslog&gt;
  &lt;/Appenders&gt;
  &lt;Loggers&gt;
    &lt;Root level=&quot;error&quot;&gt;
      &lt;AppenderRef ref=&quot;bsd&quot;/&gt;
    &lt;/Root&gt;
  &lt;/Loggers&gt;
&lt;/Configuration&gt;</pre></div>
        </div>

      </div>
  

					</td>
				</tr>
			</table>
		</div>

		<div class="footer">
							<p>Copyright &copy; 1999-2021 <a class="external" href="http://www.apache.org">Apache Software Foundation</a>. All Rights Reserved.</p>
				<p>Apache Logging, Apache Log4j, Log4j, Apache, the Apache feather logo, and the Apache Logging project logo are trademarks of The Apache Software Foundation.</p>
				<p>Site powered by <a class="external" href="http://getbootstrap.com/">Twitter Bootstrap</a>. Icons from <a class="external" href="http://glyphicons.com/">Glyphicons Free</a>.</p>
			</div>
		</div>
	</body>
</html>
