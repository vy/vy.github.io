<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>OpenVSwitch Installation Notes: OpenFlow Toolbelt</title>
    <link rel="stylesheet" href="/css/common.css">
    <meta name="generator" content="nanoc 3.8.0">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="/css/post.css">
    <script type="text/javascript">
      var _gaq = _gaq || [];
      _gaq.push(['_setAccount', 'UA-40183531-1']);
      _gaq.push(['_trackPageview']);
      (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
      })();
    </script>
  </head>
  <body>
    <div id="container">

      <ul id="menu">
        <li><a href="/">Home</a></li><li><a href="/blog/">Blog</a></li><li><a href="/code/">Code</a></li><li><a href="/blog/feed/">Feed</a></li>
      </ul>

    

<div id="post">

    <div class="head">
        <div class="title">OpenVSwitch Installation Notes: OpenFlow Toolbelt</div>
        <div class="subtitle">posted at
            May 27, 2012
            with tags <a href="/blog/tag/openflow">openflow</a>, <a href="/blog/tag/openvswitch">openvswitch</a>, <a href="/blog/tag/networking">networking</a>, <a href="/blog/tag/sdn">sdn</a>
        </div>
    </div>

    <div class="body">

        <script type="text/javascript">
        var asyncLoadRequests = [];
        </script>

        
<p>In the lab, I quite often find my self installing <a href="http://www.openvswitch.org/">Open vSwitch</a> instances, configuring network parameters for certain functionality and probing network interfaces to check connectivity, again and again. You know, the daily routines in an <a href="http://www.openflow.org/">OpenFlow</a> research laboratory. To ease the workflow, I put together a small <em>toolbelt</em>.</p>

<pre><code class="language-bash"><span class="nv">$ </span>of-toolbelt.sh
Usage: of-toolbelt.sh &lt;ACTION&gt;
Actions: ofctl
         vsctl
         vswitchd
         insmod
         db_create
         db_start
         get_controller
         set_controller
         del_controller
         get_dpid
         set_dpid
         get_stp
         set_stp
         dl_ovs
         install_ovs
         ethtool_help
         arping_help
<span class="nv">$ </span>of-toolbelt.sh dl_ovs
<span class="nv">$ </span>of-toolbelt.sh install_ovs openvswitch-1.4.1.tar.gz
<span class="nv">$ </span>of-toolbelt.sh db_create
<span class="nv">$ </span>of-toolbelt.sh db_start
<span class="nv">$ </span>of-toolbelt.sh vsctl add-br br0
<span class="nv">$ </span>of-toolbelt.sh set_dpid br0 1
<span class="nv">$ </span>of-toolbelt.sh get_dpid br0
<span class="s2">"0000000000000001"</span>
<span class="nv">$ </span>of-toolbelt.sh get_stp br0
<span class="nb">false</span>
<span class="nv">$ </span>of-toolbelt.sh set_stp br0 <span class="nb">true</span>
<span class="nv">$ </span>of-toolbelt.sh insmod
<span class="nv">$ </span>of-toolbelt.sh vswitchd
<span class="nv">$ </span>of-toolbelt.sh ethtool_help
ethtool eth0
ethtool -s eth0 speed <span class="m">10</span> duplex full autoneg off
ethtool -s eth0 autoneg on
ethtool -s eth0 autoneg on adver 0x001    <span class="c"># 10 Half</span>
                                 0x002    <span class="c"># 10 Full</span>
                                 0x004    <span class="c"># 100 Half</span>
                                 0x008    <span class="c"># 100 Full</span>
                                 0x010    <span class="c"># 1000 Half(not supported by IEEE standards)</span>
                                 0x020    <span class="c"># 1000 Full</span>
                                 0x8000   <span class="c"># 2500 Full(not supported by IEEE standards)</span>
                                 0x1000   <span class="c"># 10000 Full</span>
                                 0x03F    <span class="c"># Auto</span>
<span class="nv">$ </span>sudo ethtool -s eth0 speed <span class="m">10</span> duplex half autoneg off
<span class="nv">$ </span>of-toolbelt.sh vsctl add-port br0 eth0</code></pre>

<p>You can find the sources in the following gist. Feel free to use it for your own purpose. (<em>Free</em> as in <em>free beer</em>.) No need to say but here it goes: Comments/Contributions are highly welcome.</p>

<script src="https://gist.github.com/2814489.js?file=of-toolbelt.sh"></script>



        <div id="disqus_thread"></div>
        <script type="text/javascript">
        var disqus_shortname = 'vyazici';
        var disqus_identifier = '/blog/post/20120527-openflow-toolbelt/';
        var disqus_title = 'OpenVSwitch Installation Notes: OpenFlow Toolbelt';
        (function() {
            var dsq = document.createElement('script');
            dsq.type = 'text/javascript';
            dsq.async = true;
            dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        })();
        </script>

        

        

    </div>
  </body>
</html>


        <script type="text/javascript">
        for (var i = 0; i < asyncLoadRequests.length; i++) {
            asyncLoadRequest = asyncLoadRequests[i];
            asyncLoadRequest();
        }
        </script>

    </div>

</div>
