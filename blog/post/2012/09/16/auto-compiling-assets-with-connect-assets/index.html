<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>Auto-Compiling Assets with connect-assets</title>
    <link rel="stylesheet" href="/css/common.css">
    <meta name="generator" content="nanoc 3.8.0">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="/css/post.css">
    <script type="text/javascript">
      var _gaq = _gaq || [];
      _gaq.push(['_setAccount', 'UA-40183531-1']);
      _gaq.push(['_trackPageview']);
      (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
      })();
    </script>
  </head>
  <body>
    <div id="container">

      <ul id="menu">
        <li><a href="/">Home</a></li><li><a href="/blog/">Blog</a></li><li><a href="/code/">Code</a></li><li><a href="/blog/feed/">Feed</a></li>
      </ul>

    


<div id="post">

	<div class="head">
		<div class="title">Auto-Compiling Assets with connect-assets</div>
		<div class="subtitle">posted at
			September 16, 2012
			with tags <a href="/blog/tag/coffeescript">coffeescript</a>, <a href="/blog/tag/expressjs">expressjs</a>, <a href="/blog/tag/javascript">javascript</a>, <a href="/blog/tag/nodejs">nodejs</a>, <a href="/blog/tag/railwayjs">railwayjs</a>
		</div>
	  	<div class="share">
	      	<div class="addthis_toolbox addthis_default_style ">
	      		<a class="addthis_button_preferred_1"></a>
	      		<a class="addthis_button_preferred_2"></a>
	      		<a class="addthis_button_preferred_3"></a>
	      		<a class="addthis_button_preferred_4"></a>
	      		<a class="addthis_button_compact"></a>
	    	</div>
	    	<script type="text/javascript">var addthis_config = {"data_track_addressbar":false};</script>
	        <script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5144adf75211a62b"></script>
	    </div>
	</div>

	<div class="body">

	  
<p>I have been using <a href="http://www.railwayjs.com/">RailwayJS</a> for a couple of weeks with great satisfaction and joy. Its built-in support for CoffeeScript files is fantastic. That being said, like a majority of other <a href="http://www.nodejs.org">NodeJS</a> web frameworks (e.g. <a href="http://geddyjs.org/">Geddy</a>, <a href="http://towerjs.org/">Tower.js</a>, <a href="http://www.socketstream.org/">SocketStream</a>, <a href="http://flatironjs.org/">FlatIron</a>) it doesn’t provide a way to ship client-side CoffeeScript files. (In this context, <a href="http://www.meteor.com/">Meteor</a> represents a notable exception, where it is capable of handling CoffeeScript files both at the server- and client-side.)</p>

<p>To establish a complete CoffeeScript experience both at the server- and client-side, one can use <a href="https://github.com/TrevorBurnham/connect-assets">connect-assets</a> by <a href="http://trevorburnham.com/">Trevor Burnham</a> to auto-compile <em>assets</em> (i.e., CoffeeScript, Stylus, LESS files) on-the-fly. For this purpose, you just need to (1) add a <code>app.use require('connect-assets')()</code> line to your <code>environment.coffee</code>, (2) create <code>js</code> and <code>css</code> folders under <code>assets</code> directory, and you are ready to go.</p>

<p>One minor glitch that you need to pay attention is, while using connect-assets, you <em>must</em> include asset files using accessor functions – <code>js()</code> and <code>css()</code> – provided by connect-assets. These functions in addition to generating necessary <code>&lt;script src="..."&gt;&lt;/script&gt;</code> tag, also register the file into the asset processor service. connect-assets auto-compiles an asset the first time it is called and caches the produced output in memory; later calls will be served from the cache. (It also provides options to write produced outputs to disk and watch file changes.) For instance, say you want to use <code>/assets/js/main.coffee</code> in <code>/app/views/main/index.ejs</code> file. For this purpose, you need to add <code>&lt;%- js('main') %&gt;</code> into your view for enabling connect-assets serving your <code>main.coffee</code> file.</p>

<p>As a final note, since connect-assets is a <a href="http://www.senchalabs.org/connect/">Connect</a> plugin, you should be able to run it on any other web framework that runs on Connect or <a href="http://expressjs.com/">ExpressJS</a>.</p>


	  <script type="text/javascript">
	    $("#post table").attr("class", "table table-hover");
	  </script>

	  <div id="disqus_thread"></div>
	  <script type="text/javascript">
	  var disqus_shortname = 'vyazici';
	  var disqus_identifier = '/blog/post/20120916-auto-compiling-assets-with-connect-assets/';
	  var disqus_title = 'Auto-Compiling Assets with connect-assets';
	  (function() {
	  	var dsq = document.createElement('script');
	  	dsq.type = 'text/javascript';
	  	dsq.async = true;
	  	dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
	  	(document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
	  })();
	  </script>

	</div>

</div>





    </div>
  </body>
</html>

