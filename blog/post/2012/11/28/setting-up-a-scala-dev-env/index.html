<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>Scala Development Environment with Intellij IDEA and SBT</title>
    <link rel="stylesheet" href="/css/bootstrap.css">
    <link rel="stylesheet" href="/css/bootstrap-responsive.css">
    <script src="/js/bootstrap.js"></script>
    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
    <link rel="stylesheet" href="/css/common.css">
    <meta name="generator" content="nanoc 3.8.0">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="/css/post.css">
    <script type="text/javascript">
      var _gaq = _gaq || [];
      _gaq.push(['_setAccount', 'UA-40183531-1']);
      _gaq.push(['_trackPageview']);
      (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
      })();
    </script>
  </head>
  <body>
    <div id="menu">
      <div><a href="/">Home</a></div><div><a href="/about/">About</a></div><div><a href="/blog/">Blog</a></div><div><a href="/code/">Code</a></div><div><a href="/blog/feed/">Feed</a></div>
    </div>
    

<div class="container">
  <div class="row-fluid">
    <div class="offset1 span10">
      <div id="post" class="more-white-box rounded-corners">
	<div class="head">
	  <div class="title">Scala Development Environment with Intellij IDEA and SBT</div>
	  <div class="subtitle">posted at
	    November 28, 2012
	    with tags <a href="/blog/tag/intellij">intellij</a>, <a href="/blog/tag/java">java</a>, <a href="/blog/tag/sbt">sbt</a>, <a href="/blog/tag/scala">scala</a>
	  </div>
	  <div class="share">
	    <div class="addthis_toolbox addthis_default_style ">
	      <a class="addthis_button_preferred_1"></a>
	      <a class="addthis_button_preferred_2"></a>
	      <a class="addthis_button_preferred_3"></a>
	      <a class="addthis_button_preferred_4"></a>
	      <a class="addthis_button_compact"></a>
	    </div>
	    <script type="text/javascript">var addthis_config = {"data_track_addressbar":false};</script>
	    <script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5144adf75211a62b"></script>
	  </div>
	</div>
	<div class="body">

	  
<p>Resisting against the <a href="https://class.coursera.org/progfun-2012-001/">Functional Programming Principles in Scala</a> buzz was meaningless. After all, this or that way I know I would be repeating those steps on my own regardless of the presence of such a lecture. To warm up, I looked around for an appropriate development environment for Scala. The last time (~2 years ago) I repeated this same step ended up with a desperate search. Fortunately, reading dozens of blog posts, forum/mailing-list threads, GitHub READMEâ€™s, repeating try-and-fail procedures leaded me to a working setup. To mitigate the friction at least to an extent for new comers, I put up this blog post to make a list of steps in order to setup a working Scala development environment on top of <a href="http://www.jetbrains.com/idea">IntelliJ IDEA</a> with <a href="http://www.scala-sbt.org/">SBT</a> integration.</p>

<h1 id="is-there-a-scala-plugin-available-for-idea">Is there a Scala plugin available for IDEA?</h1>

<p>Good news, yes. <a href="http://confluence.jetbrains.net/display/SCA/Scala+Plugin+for+IntelliJ+IDEA">It</a> is under active development, works way better than its alternatives, has a responsive maintainer and an active <a href="http://devnet.jetbrains.net/community/idea/scala?view=discussions">community</a>. Plugin lets you create Scala projects, compile/run/debug Scala source files, scripts, and worksheets. Navigation, refactoring, tab-completion, code snippets are included as well. (Note that it is <em>strongly</em> advised to use an <a href="http://confluence.jetbrains.net/display/IDEADEV/EAP">EAP</a> version for a smooth experience.)</p>

<h1 id="is-there-a-quick-start-guide-for-idea-scala-plugin">Is there a quick start guide for IDEA Scala plugin?</h1>

<p>Yes, see <a href="http://confluence.jetbrains.net/display/SCA/Getting+Started+with+IntelliJ+IDEA+Scala+Plugin">Getting Started with IntelliJ IDEA Scala Plugin</a>.</p>

<h1 id="how-do-i-manage-project-dependencies">How do I manage project dependencies?</h1>

<p>While one can setup a Maven/Ivy/Ant configuration for a Scala project, <a href="http://www.scala-sbt.org/">SBT</a> is known to be the de-facto tool for build management throughout the Scala community. (Otherwise, you will need to set explicit scala-compiler and scala-library dependencies in XML mazes.) Fortunately, there is an <a href="http://plugins.intellij.net/plugin?pr=idea&amp;pluginId=5007">SBT plugin</a> for IDEA. It offers a console where SBT commands can be entered interactively, and a <em>Before Launch</em> task to delegate project compilation to SBT, as an alternative to the built in IntelliJ Make.</p>

<h1 id="is-there-a-quick-start-guide-for-sbt">Is there a quick start guide for SBT?</h1>

<p>Yes, see <a href="http://www.scala-sbt.org/release/docs/Getting-Started/Hello.html">Hello, World</a> in <a href="http://www.scala-sbt.org/release/docs/index.html">SBT documentation</a>.</p>

<h1 id="how-can-i-integrate-libraries-installed-by-sbt-to-idea">How can I integrate libraries installed by SBT to IDEA?</h1>

<p>At its core, SBT uses <a href="http://ant.apache.org/ivy/">Apache Ivy</a>, which has its own nasty ways of dealing with downloaded JARs under <code>~/.ivy2</code>. Instead of manually defining IDEA module dependencies for each JAR a project uses, lucky for us, there exists an SBT plugin for this purpose: <a href="https://github.com/mpeltonen/sbt-idea">sbt-idea</a>. Basically, sbt-idea enhances SBT with a new task, called <em>gen-idea</em>, which creates IDEA project files with necessary module dependencies induced by SBT. That is,</p>

<ol>
  <li>Add your dependencies to your SBT configuration,</li>
  <li>Call <code>sbt update</code> to download/update project dependencies,</li>
  <li>Call <code>sbt gen-idea</code> to create IDEA project files,</li>
  <li>Open created project from IDEA.</li>
</ol>

<h1 id="what-are-the-idea-modules-created-by-sbt-idea">What are the IDEA modules created by sbt-idea?</h1>

<p>In addition to below directories, SBT dependencies are added to the IDEA module configuration.</p>

<ul>
  <li>
<strong>Source Folders:</strong> <code>src/main/{scala,java,resources}</code>
</li>
  <li>
<strong>Test Source Folders:</strong> <code>src/test/{scala,java,resources}</code>
</li>
</ul>

<h1 id="what-about-testing">What about testing?</h1>

<p>SBT supports a couple of testing frameworks, e.g., <a href="http://etorreborre.github.com/specs2/">specs2</a>, <a href="http://code.google.com/p/scalacheck/">ScalaCheck</a>, and
<a href="http://www.artima.com/scalatest/">ScalaTest</a>. See <a href="http://www.scala-sbt.org/release/docs/Detailed-Topics/Testing.html">Testing</a> section of the SBT documentation for a detailed discussion.</p>

<h1 id="what-about-my-gitignore">What about my <code>.gitignore</code>?</h1>

<p>Here you go.</p>

<pre><code>/.idea
/.idea_modules
target/
</code></pre>

<h1 id="i-read-enough-gimme-the-code">I read enough, gimme the code!</h1>

<p>Create a project directory.</p>

<pre><code class="language-bash"><span class="nv">$ </span><span class="nb">export </span><span class="nv">PROJECT_DIR</span><span class="o">=</span>~/scala/ScalaHelloWorld
<span class="nv">$ </span>mkdir <span class="nv">$PROJECT_DIR</span></code></pre>

<p>Create <code>$PROJECT_DIR/build.sbt</code> as follows. (In this example, I used ScalaTest framework.)</p>

<pre><code class="language-scala"><span class="n">name</span> <span class="o">:=</span> <span class="s">"ScalaHelloWorld"</span>
 
<span class="n">version</span> <span class="o">:=</span> <span class="s">"0.0.1"</span>
 
<span class="n">scalaVersion</span> <span class="o">:=</span> <span class="s">"2.9.2"</span>
 
<span class="n">libraryDependencies</span> <span class="o">+=</span> <span class="s">"org.scalatest"</span> <span class="o">%%</span> <span class="s">"scalatest"</span> <span class="o">%</span> <span class="s">"1.8"</span> <span class="o">%</span> <span class="s">"test"</span></code></pre>

<p>Create <code>$PROJECT_DIR/project</code> directory and add below lines to <code>$PROJECT_DIR/project/plugins.sbt</code> to add sbt-idea plugin.</p>

<pre><code class="language-scala"><span class="n">resolvers</span> <span class="o">+=</span> <span class="s">"Sonatype snapshots"</span> <span class="n">at</span> <span class="s">"http://oss.sonatype.org/content/repositories/snapshots/"</span>
 
<span class="n">addSbtPlugin</span><span class="o">(</span><span class="s">"com.github.mpeltonen"</span> <span class="o">%</span> <span class="s">"sbt-idea"</span> <span class="o">%</span> <span class="s">"1.2.0-SNAPSHOT"</span><span class="o">)</span></code></pre>

<p>Run <code>sbt</code> in <code>$PROJECT_DIR</code> and execute <code>gen-idea</code> task.</p>

<pre><code class="language-bash"><span class="nv">$ </span>sbt
<span class="o">[</span>info<span class="o">]</span> Loading project definition from /home/vy/scala/ScalaHelloWorld/project
<span class="o">[</span>info<span class="o">]</span> Updating <span class="o">{</span>file:/home/vy/scala/ScalaHelloWorld/project/<span class="o">}</span>default-70d248...
<span class="o">[</span>info<span class="o">]</span> Resolving org.scala-sbt#precompiled-2_10_0-m7<span class="p">;</span>0.12.1 ...
<span class="o">[</span>info<span class="o">]</span> Done updating.
<span class="o">[</span>info<span class="o">]</span> Set current project to ScalaHelloWorld <span class="o">(</span>in build file:/home/vy/scala/ScalaHelloWorld/<span class="o">)</span>
&gt; gen-idea
<span class="o">[</span>info<span class="o">]</span> Trying to create an Idea module ScalaHelloWorld
<span class="o">[</span>info<span class="o">]</span> Updating <span class="o">{</span>file:/home/vy/scala/ScalaHelloWorld/<span class="o">}</span>default-3005c4...
<span class="o">[</span>info<span class="o">]</span> Resolving org.scalatest#scalatest_2.9.2<span class="p">;</span>1.8 ...
<span class="o">[</span>info<span class="o">]</span> Done updating.
<span class="o">[</span>info<span class="o">]</span> Resolving org.scalatest#scalatest_2.9.2<span class="p">;</span>1.8 ...
<span class="o">[</span>info<span class="o">]</span> Excluding folder target
<span class="o">[</span>info<span class="o">]</span> Created /home/vy/scala/ScalaHelloWorld/.idea/IdeaProject.iml
<span class="o">[</span>info<span class="o">]</span> Created /home/vy/scala/ScalaHelloWorld/.idea
<span class="o">[</span>info<span class="o">]</span> Excluding folder /home/vy/scala/ScalaHelloWorld/target
<span class="o">[</span>info<span class="o">]</span> Created /home/vy/scala/ScalaHelloWorld/.idea_modules/ScalaHelloWorld.iml
<span class="o">[</span>info<span class="o">]</span> Created /home/vy/scala/ScalaHelloWorld/.idea_modules/ScalaHelloWorld-build.iml
&gt;</code></pre>

<p>In <code>src/main/scala/Main.scala</code>, create a <code>main()</code> stub with a testable function in it.</p>

<pre><code class="language-scala"><span class="k">object</span> <span class="nc">Main</span> <span class="o">{</span>
  <span class="k">def</span> <span class="n">main</span><span class="o">(</span><span class="n">args</span><span class="k">:</span> <span class="kt">Array</span><span class="o">[</span><span class="kt">String</span><span class="o">])</span> <span class="o">{</span>
    <span class="n">println</span><span class="o">(</span><span class="s">"Hello, World!"</span><span class="o">)</span>
    <span class="n">println</span><span class="o">(</span><span class="s">"# of arguments: %d"</span> <span class="n">format</span> <span class="n">count</span><span class="o">(</span><span class="n">args</span><span class="o">))</span>
  <span class="o">}</span>

  <span class="k">def</span> <span class="n">count</span><span class="o">[</span><span class="kt">T</span><span class="o">](</span><span class="n">it</span><span class="k">:</span> <span class="kt">Iterable</span><span class="o">[</span><span class="kt">T</span><span class="o">])</span><span class="k">:</span> <span class="kt">Int</span> <span class="o">=</span> <span class="n">it</span><span class="o">.</span><span class="n">size</span>
<span class="o">}</span></code></pre>

<p>In <code>src/test/scala/MainSuite.scala</code>, create a sample test suite.</p>

<pre><code class="language-scala"><span class="k">import</span> <span class="nn">org.scalatest.FunSuite</span>

<span class="k">class</span> <span class="nc">MainSuite</span> <span class="k">extends</span> <span class="nc">FunSuite</span> <span class="o">{</span>
  <span class="n">test</span><span class="o">(</span><span class="s">"counting an empty collection"</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">assert</span><span class="o">(</span><span class="nc">Main</span><span class="o">.</span><span class="n">count</span><span class="o">(</span><span class="nc">Array</span><span class="o">[</span><span class="kt">Int</span><span class="o">]())</span> <span class="o">==</span> <span class="mi">0</span><span class="o">)</span>
    <span class="n">assert</span><span class="o">(</span><span class="nc">Main</span><span class="o">.</span><span class="n">count</span><span class="o">(</span><span class="nc">Map</span><span class="o">())</span> <span class="o">==</span> <span class="mi">0</span><span class="o">)</span>
    <span class="n">assert</span><span class="o">(</span><span class="nc">Main</span><span class="o">.</span><span class="n">count</span><span class="o">(</span><span class="nc">Set</span><span class="o">())</span> <span class="o">==</span> <span class="mi">0</span><span class="o">)</span>
  <span class="o">}</span>

  <span class="n">test</span><span class="o">(</span><span class="s">"counting a non-empty collection"</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">assert</span><span class="o">(</span><span class="nc">Main</span><span class="o">.</span><span class="n">count</span><span class="o">(</span><span class="nc">Array</span><span class="o">(</span><span class="mi">1</span><span class="o">))</span> <span class="o">==</span> <span class="mi">1</span><span class="o">)</span>
    <span class="n">assert</span><span class="o">(</span><span class="nc">Main</span><span class="o">.</span><span class="n">count</span><span class="o">(</span><span class="nc">Map</span><span class="o">(</span><span class="mi">1</span> <span class="o">-&gt;</span> <span class="mi">1</span><span class="o">))</span> <span class="o">==</span> <span class="mi">1</span><span class="o">)</span>
    <span class="n">assert</span><span class="o">(</span><span class="nc">Main</span><span class="o">.</span><span class="n">count</span><span class="o">(</span><span class="nc">Set</span><span class="o">(</span><span class="mi">1</span><span class="o">))</span> <span class="o">==</span> <span class="mi">1</span><span class="o">)</span>
  <span class="o">}</span>
<span class="o">}</span></code></pre>

<p>Enjoy the rest by either creating your own IDEA run configurations, or manually running tasks within the SBT console. (As a final note, while creating IDEA run configurations, you can use SBT <em>Before Launch</em> task provided by IDEA SBT plugin.)</p>


	  <script type="text/javascript">
	    $("#post table").attr("class", "table table-hover");
	  </script>

	  <div id="disqus_thread"></div>
	  <script type="text/javascript">
	  var disqus_shortname = 'vyazici';
	  var disqus_identifier = '/blog/post/20121128-setting-up-a-scala-dev-env/';
	  var disqus_title = 'Scala Development Environment with Intellij IDEA and SBT';
	  (function() {
	  	var dsq = document.createElement('script');
	  	dsq.type = 'text/javascript';
	  	dsq.async = true;
	  	dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
	  	(document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
	  })();
	  </script>

	</div>
      </div>
      <div id="bgauthor" class="narrow-font">
	background image by
	<a href="http://jenniferwetzel.com/">Jennifer Wetzel</a>
      </div>
    </div>
  </div>
</div>




  </body>
</html>

